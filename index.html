<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>„É¥„Ç°„É≥„Éë„Ç§„Ç¢ÂÖ®Áü•ÂÖ®ËÉΩ ‚Äî Kanji & Jogo</title>

<style>
:root{
  --bg:#0b0f14;
  --border:rgba(255,255,255,.16);
  --text:#eef2ff;
  --muted:rgba(238,242,255,.72);
  --muted2:rgba(238,242,255,.55);

  /* tema din√¢mico */
  --moodHue: 195;
  --accent:  hsl(calc(var(--moodHue) - 25) 90% 60%);
  --accent2: hsl(var(--moodHue) 90% 58%);
  --accent3: hsl(calc(var(--moodHue) + 55) 90% 62%);

  --good:#34d399;
  --bad:#fb7185;
  --warn:#fbbf24;

  --radius:18px;
  --shadow: 0 18px 60px rgba(0,0,0,.55);

  /* selects s√≥lidos */
  --selectBg:#0f1826;
  --selectBorder:rgba(255,255,255,.28);
}

*{ box-sizing:border-box; }

body{
  margin:0;
  color:var(--text);
  font-family:"Yu Gothic","Hiragino Kaku Gothic ProN",system-ui,sans-serif;
  line-height:1.9;

  background:
    radial-gradient(1100px 650px at 12% 10%, hsla(calc(var(--moodHue) - 25), 90%, 60%, .22), transparent 55%),
    radial-gradient(900px 600px at 92% 15%, hsla(var(--moodHue), 90%, 58%, .18), transparent 55%),
    radial-gradient(900px 650px at 20% 92%, hsla(calc(var(--moodHue) + 55), 90%, 62%, .14), transparent 55%),
    var(--bg);
  transition: background .5s ease;
}

header{
  position:sticky;
  top:0;
  z-index:10;
  background: rgba(10,14,20,.78);
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);
  border-bottom:1px solid var(--border);
}

.topbar{
  max-width:1180px;
  margin:auto;
  padding:18px 18px 12px;
  display:flex;
  gap:16px;
  align-items:flex-start;
  justify-content:space-between;
  flex-wrap:wrap;
}

.brand{ min-width:280px; }
.brand .t{
  font-size:20px;
  font-weight:900;
  letter-spacing:1.2px;
}
.brand .s{
  margin-top:6px;
  color:var(--muted);
  font-size:13px;
}
.brand .s b{ color:var(--text); }

nav{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  align-items:center;
  justify-content:flex-end;
}

.container{
  max-width:1180px;
  margin:auto;
  padding:34px 18px 90px;
}

.section{ display:none; }
.section.active{ display:block; }

.grid{
  display:grid;
  grid-template-columns: 1.2fr .8fr;
  gap:16px;
}
@media (max-width: 980px){ .grid{ grid-template-columns: 1fr; } }

.panel{
  background: rgba(255,255,255,.06);
  border:1px solid var(--border);
  border-radius:22px;
  padding:16px;
  box-shadow: var(--shadow);
}

.panel h2{
  margin:0 0 8px;
  font-size:15px;
  letter-spacing:.6px;
}

.hint{
  color:var(--muted);
  font-size:13px;
  margin:0;
}

.row{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  flex-wrap:wrap;
}

.card{
  background: rgba(255,255,255,.08);
  border:1px solid rgba(255,255,255,.14);
  border-radius: var(--radius);
  padding:16px;
  margin-top:12px;
}

.jp{
  font-size:22px;
  font-weight:900;
  color: var(--accent2);
  letter-spacing:.6px;
}
.hira{ margin-top:6px; color:var(--muted); font-size:13px; }
.mean{ margin-top:8px; font-size:14px; font-weight:700; }

.badges{
  display:flex; gap:8px; flex-wrap:wrap; margin-top:10px;
}
.badge{
  font-size:11px;
  padding:4px 10px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.18);
  color:var(--muted);
  background: rgba(255,255,255,.06);
}
.badge.n5{ border-color: rgba(52,211,153,.45); color: rgba(52,211,153,.95); }
.badge.n4{ border-color: rgba(59,130,246,.45); color: rgba(147,197,253,.95); }
.badge.tag{ border-color: rgba(255,255,255,.22); color: var(--text); }
.badge.warn{ border-color: rgba(251,191,36,.55); color: rgba(251,191,36,.98); }

.tabbtn{
  cursor:pointer;
  border:1px solid rgba(255,255,255,.22);
  background: rgba(255,255,255,.10);
  color: rgba(238,242,255,.92);
  padding:10px 14px;
  border-radius:999px;
  font-size:13px;
  user-select:none;
  box-shadow: var(--shadow);
  transition: transform .08s ease, background .18s ease, border-color .18s ease;
}
.tabbtn:hover{ background: rgba(255,255,255,.14); }
.tabbtn:active{ transform: translateY(1px); }
.tabbtn.active{
  border-color: hsla(var(--moodHue), 90%, 60%, .60);
  background: hsla(var(--moodHue), 90%, 55%, .22);
}

.btn{
  cursor:pointer;
  border:1px solid rgba(255,255,255,.28);
  background: rgba(255,255,255,.12);
  color: rgba(255,255,255,.98);
  padding:9px 12px;
  border-radius:14px;
  font-size:12px;
  font-weight:800;
  user-select:none;
  transition: transform .08s ease, background .18s ease, border-color .18s ease;
}
.btn:hover{ background: rgba(255,255,255,.16); border-color: rgba(255,255,255,.38); }
.btn:active{ transform: translateY(1px); }
.btn.primary{
  border-color: hsla(var(--moodHue), 90%, 60%, .70);
  background: hsla(var(--moodHue), 90%, 55%, .26);
}
.btn.good{
  border-color: rgba(52,211,153,.75);
  background: rgba(52,211,153,.20);
}
.btn.danger{
  border-color: rgba(251,113,133,.75);
  background: rgba(251,113,133,.18);
}
.btn.warn{
  border-color: rgba(251,191,36,.75);
  background: rgba(251,191,36,.18);
}

/* SELECTS s√≥lidos e bem vis√≠veis */
select{
  padding:9px 11px;
  border-radius:12px;
  border:1px solid var(--selectBorder);
  background: var(--selectBg);
  color: rgba(255,255,255,.96);
  outline:none;
  font-weight:800;
}
select:hover{
  border-color: rgba(255,255,255,.40);
}
select:focus-visible,
.btn:focus-visible,
.tabbtn:focus-visible,
.choiceBtn:focus-visible{
  outline: 3px solid hsla(var(--moodHue), 90%, 60%, .55);
  outline-offset: 2px;
}

.kanjigrid{
  display:grid;
  grid-template-columns:repeat(auto-fill, minmax(92px, 1fr));
  gap:12px;
  margin-top:12px;
}

.kanjiitem{
  background: rgba(255,255,255,.10);
  border:1px solid rgba(255,255,255,.20);
  border-radius: 16px;
  padding:12px 10px;
  text-align:center;
  cursor:pointer;
  transition: transform .12s ease, border-color .18s ease, background .18s ease;
}
.kanjiitem:hover{
  transform: translateY(-1px);
  border-color: hsla(var(--moodHue), 90%, 60%, .55);
  background: rgba(255,255,255,.13);
}
.kanjiitem .k{
  font-size:28px;
  font-weight:900;
  color: var(--accent2);
}
.kanjiitem .lvl{ margin-top:6px; font-size:11px; color: var(--muted); }
.kanjiitem .lvl b{ color: var(--text); }

.strokeBox{
  margin-top:12px;
  border:1px solid rgba(255,255,255,.16);
  border-radius:16px;
  overflow:hidden;
  background: rgba(255,255,255,.07);
}
.strokeHead{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  padding:10px 12px;
  border-bottom:1px solid rgba(255,255,255,.12);
}
.strokeHead .t{ font-size:13px; color: var(--muted); }
.strokeBody{ padding:12px; }
.strokeBody svg{ width:100%; height:auto; display:block; }
.strokeNote{ color: var(--muted2); font-size:12px; margin-top:8px; }

.bigKanji{
  font-size:86px;
  font-weight:900;
  letter-spacing:2px;
  text-align:center;
  color: var(--accent2);
  line-height:1.0;
  margin: 8px 0 6px;
}

hr.sep{
  border:none;
  border-top:1px solid rgba(255,255,255,.10);
  margin:14px 0;
}

.small{ color: var(--muted); font-size:13px; }
.small b{ color: var(--text); }

.footer{
  text-align:center;
  padding:40px 0 0;
  color: var(--muted2);
  font-size:12px;
}

/* Quiz */
.mcGrid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:10px;
  margin-top:12px;
}
@media (max-width: 820px){ .mcGrid{ grid-template-columns:1fr; } }

.mcBox{
  border:1px solid rgba(255,255,255,.14);
  border-radius:16px;
  padding:12px;
  background: rgba(255,255,255,.07);
}
.mcBox h3{
  margin:0 0 8px;
  font-size:13px;
  color: var(--muted);
  letter-spacing:.6px;
}

.choiceList{ display:grid; gap:8px; }
.choiceBtn{
  text-align:left;
  padding:12px 12px;
  border-radius:14px;
  border:1px solid rgba(255,255,255,.26);
  background: rgba(255,255,255,.14);
  color: rgba(255,255,255,.98);
  cursor:pointer;
  font-weight:900;
  transition: transform .08s ease, border-color .18s ease, background .18s ease;
}
.choiceBtn:hover{
  transform: translateY(-1px);
  background: rgba(255,255,255,.18);
  border-color: hsla(var(--moodHue), 90%, 60%, .55);
}
.choiceBtn.correct{
  border-color: rgba(52,211,153,.85);
  background: rgba(52,211,153,.22);
}
.choiceBtn.wrong{
  border-color: rgba(251,113,133,.85);
  background: rgba(251,113,133,.20);
}
.choiceBtn:disabled{ opacity:.96; cursor:not-allowed; }

.timerBarWrap{
  width:100%;
  height:10px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.16);
  background: rgba(255,255,255,.08);
  overflow:hidden;
  margin-top:10px;
}
.timerBar{
  height:100%;
  width:100%;
  background: linear-gradient(90deg,
    hsla(var(--moodHue), 90%, 60%, .90),
    hsla(calc(var(--moodHue) - 25), 90%, 60%, .85),
    hsla(calc(var(--moodHue) + 55), 90%, 62%, .75)
  );
  transition: width .12s linear;
}

/* flash (acerto/erro) */
.flash{
  position: fixed;
  inset: 0;
  pointer-events: none;
  opacity: 0;
  z-index: 999;
}
.flash.good{ background: radial-gradient(circle at 50% 35%, rgba(52,211,153,.24), transparent 62%); }
.flash.bad{  background: radial-gradient(circle at 50% 35%, rgba(251,113,133,.24), transparent 62%); }
.flash.on{ animation: flash .55s ease-out; }
@keyframes flash{
  0%{ opacity:0; }
  20%{ opacity:1; }
  100%{ opacity:0; }
}
</style>
</head>

<body>
<div id="flash" class="flash"></div>

<header>
  <div class="topbar">
    <div class="brand">
      <div class="t">„É¥„Ç°„É≥„Éë„Ç§„Ç¢ÂÖ®Áü•ÂÖ®ËÉΩ</div>
      <div class="s">Kanji <b>N5 + N4</b> ¬∑ Treino de leitura e significado</div>
    </div>

    <nav>
      <div class="tabbtn active" id="tab-kanji">üà∂ Kanji</div>
      <div class="tabbtn" id="tab-quiz">üéÆ Jogo</div>
    </nav>
  </div>
</header>

<div class="container">

  <!-- ====================== KANJI ====================== -->
  <section id="kanji" class="section active">
    <div class="grid">
      <div class="panel">
        <div class="row">
          <div>
            <h2>Kanji ‚Äî Lista (N5 + N4)</h2>
            <p class="hint">Clique em um kanji: aparece detalhe e a ordem dos tra√ßos desenhando.</p>
          </div>

          <div class="row">
            <div class="small">Filtro</div>
            <select id="levelFilter">
              <option value="ALL" selected>ALL (N5+N4)</option>
              <option value="N5">Somente N5</option>
              <option value="N4">Somente N4</option>
            </select>
          </div>
        </div>

        <div class="kanjigrid" id="kanjigrid"></div>
      </div>

      <div class="panel" id="detailPanel">
        <h2>Detalhe</h2>
        <p class="hint">Selecione um kanji na lista.</p>

        <div id="kanjiDetail" class="card" style="display:none;">
          <div class="jp" id="kdKanji"></div>
          <div class="hira" id="kdReadings"></div>
          <div class="mean" id="kdMean"></div>
          <div class="badges" id="kdBadges"></div>

          <div class="strokeBox" id="kdStrokeBox">
            <div class="strokeHead">
              <div class="t">Ordem dos tra√ßos (desenhando)</div>
              <div class="row">
                <div class="btn primary" id="kdReplay">Repetir</div>
                <select id="kdSpeed" title="Velocidade">
                  <option value="0.7">R√°pido</option>
                  <option value="1" selected>Normal</option>
                  <option value="1.35">Lento</option>
                </select>
              </div>
            </div>
            <div class="strokeBody" id="kdStroke"></div>
            <div class="strokeNote">Fonte: KanjiVG (SVG). Se falhar, Ctrl+F5.</div>
          </div>

          <hr class="sep">
          <div class="row">
            <div class="btn good" id="kdTrain">Treinar este kanji no Jogo</div>
          </div>
        </div>

        <div id="kanjiDetailEmpty" class="card">
          <div class="mean" style="color:var(--muted);">Clique em um kanji para ver detalhes aqui.</div>
        </div>
      </div>
    </div>
  </section>

  <!-- ====================== QUIZ ====================== -->
  <section id="quiz" class="section">
    <div class="grid">
      <div class="panel">
        <div class="row">
          <div>
            <h2>Jogo ‚Äî m√∫ltipla escolha + timer</h2>
            <p class="hint">Acerta 2/2 (Leitura + Significado principal). Depois do resultado, mostra 2 palavras e leitura.</p>
          </div>

          <div class="row">
            <label class="toggle" title="Repete mais os que voc√™ erra">
              <input type="checkbox" id="quizSmart" checked />
              modo inteligente
            </label>
            <label class="toggle" title="Reinicia automaticamente a cada quest√£o">
              <input type="checkbox" id="quizAuto" checked />
              auto-run
            </label>
          </div>
        </div>

        <div class="card">
          <div class="row" style="align-items:flex-end;">
            <div style="flex:1;">
              <div class="bigKanji" id="quizKanji">‰∏Ä</div>
              <div class="badges" style="justify-content:center;">
                <span class="badge" id="quizScore">Acertos: 0 ¬∑ Erros: 0 ¬∑ Streak: 0</span>
                <span class="badge warn" id="quizTimerText">‚è±Ô∏è 12s</span>
                <span class="badge tag" id="quizMoodText">Mood: ‚Äî</span>
              </div>
              <div class="timerBarWrap">
                <div class="timerBar" id="timerBar"></div>
              </div>
            </div>

            <div style="display:flex; gap:10px; flex-wrap:wrap; justify-content:flex-end;">
              <div class="small">N√≠vel</div>
              <select id="quizLevel">
                <option value="ALL" selected>ALL</option>
                <option value="N5">N5</option>
                <option value="N4">N4</option>
              </select>

              <div class="small">Tempo</div>
              <select id="quizTime">
                <option value="8">8s</option>
                <option value="12" selected>12s</option>
                <option value="18">18s</option>
                <option value="25">25s</option>
              </select>

              <div class="btn good" id="quizStart">Start</div>
              <div class="btn warn" id="quizPause">Pausar</div>
              <div class="btn primary" id="quizNext">Pr√≥ximo</div>
              <div class="btn danger" id="quizReset">Zerar sess√£o</div>
            </div>
          </div>

          <hr class="sep">

          <div class="mcGrid">
            <div class="mcBox">
              <h3>Leituras (escolha 1)</h3>
              <div class="choiceList" id="readingChoices"></div>
            </div>

            <div class="mcBox">
              <h3>Significado principal (PT-BR) (escolha 1)</h3>
              <div class="choiceList" id="meaningChoices"></div>
            </div>
          </div>

          <div id="quizFeedback" class="card" style="display:none;">
            <div class="mean" id="quizFeedbackTitle"></div>
            <div class="hira" id="quizFeedbackDetail"></div>

            <div class="card" style="margin-top:12px;">
              <div class="mean">üìå 2 palavras com este kanji</div>
              <div class="small" id="quizVocab">‚Äî</div>
            </div>

            <div class="strokeBox" style="margin-top:12px;">
              <div class="strokeHead">
                <div class="t">Ordem dos tra√ßos (desenhando)</div>
                <div class="row">
                  <div class="btn primary" id="quizReplay">Repetir</div>
                  <select id="quizSpeed" title="Velocidade">
                    <option value="0.7">R√°pido</option>
                    <option value="1" selected>Normal</option>
                    <option value="1.35">Lento</option>
                  </select>
                </div>
              </div>
              <div class="strokeBody" id="quizStroke"></div>
              <div class="strokeNote">Fonte: KanjiVG.</div>
            </div>
          </div>
        </div>
      </div>

      <div class="panel">
        <h2>Ranking + Estat√≠sticas (local)</h2>
        <p class="hint">Salva no navegador (localStorage).</p>

        <div class="card">
          <div class="mean">üèÜ Melhores marcas</div>
          <div class="small" id="bestStats">‚Äî</div>

          <hr class="sep">
          <div class="mean">üìä Top kanji mais errados</div>
          <div class="small" id="worstKanjis">‚Äî</div>

          <hr class="sep">
          <div class="row">
            <div class="btn danger" id="resetHistory">Resetar hist√≥rico</div>
            <div class="btn good" id="goKanji">Voltar ao Kanji</div>
          </div>

          <hr class="sep">
          <div class="small">
            <b>Como funciona o ‚Äúmood‚Äù:</b><br>
            ‚Ä¢ Baseado nos √∫ltimos 12 resultados.<br>
            ‚Ä¢ Mais acertos = tema mais verde / menos acertos = mais vermelho.
          </div>
        </div>
      </div>
    </div>
  </section>

  <div class="footer">„É¥„Ç°„É≥„Éë„Ç§„Ç¢ÂÖ®Áü•ÂÖ®ËÉΩ ¬© 2025</div>
</div>

<script>
/* =========================
   LISTAS DE N√çVEL
   ========================= */
const N5_LIST = [
  "‰∏Ä","‰∏É","‰∏á","‰∏â","‰∏ä","‰∏ã","‰∏≠","‰πù","‰∫å","‰∫î","‰∫∫","‰ªä","‰ºë","‰Ωï","ÂÖà","ÂÖ•","ÂÖ´","ÂÖ≠","ÂÜÜ","Âá∫","ÂàÜ","Ââç","Âåó","ÂçÅ","ÂçÉ","Âçà","Âçä","Âçó","Âèã","Âè≥","Âêç","Âõõ","ÂõΩ","Âúü","Â§ñ","Â§ß","Â§©","Â•≥","Â≠ê","Â≠¶","Â∞è","Â±±","Â∑ù","Â∑¶","Âπ¥","Âæå","Êó•","ÊôÇ","Êõ∏","Êúà","Êú®","Êú¨","Êù•","Êù±","Ê†°","ÊØç","ÊØé","Ê∞ó","Ê∞¥","ÁÅ´","Áà∂","Áîü","Áî∑","ÁôΩ","Áôæ","ËÅû","Ë°å","Ë•ø","Ë¶ã","Ë©±","Ë™û","Ë™≠","Ëªä","Èáë","Èï∑","Èñì","Èõ®","Èõª","È£ü","È´ò"
];

const N4_LIST = [
  "‰∏ç","‰∏ñ","‰∏ª","‰∫ã","‰∫¨","‰ªï","‰ª£","‰ª•","‰ºö","‰Ωè","‰Ωì","‰Ωú","‰Ωø","ÂÄü","ÂÖÉ","ÂÖÑ","ÂÖ¨","ÂÜô","ÂÜ¨","Âàá","Âà•","Âäõ","Âãâ","Âãï","Âåª","Âéª","Âè£","Âè§","Âè∞","Âêå","Âë≥","ÂìÅ","Âì°","Âïè","Âõ≥","Âú∞","Â†Ç","Â†¥","Â£≤","Â§è","Â§ï","Â§ö","Â§ú","Â¶π","Âßâ","Âßã","Â≠ó","ÂÆâ","ÂÆ§","ÂÆ∂","Â∞ë","Â±ã","Â∑•","Â∏∞","Â∫É","Â∫ó","Â∫¶","Âª∫","Âºü","Âº∑","ÂæÖ","ÂøÉ","ÊÄù","ÊÄ•","ÊÇ™","ÊÑè","Êâã","ÊåÅ","Êïô","Êñá","Êñô","Êñ∞","Êñπ","ÊóÖ","Êóè","Êó©","Êòé","Êò†","Êò•","Êòº","Êõú","Êúâ","Êúç","Êúù","Ê•≠","Ê•Ω","Ê≠å","Ê≠¢","Ê≠£","Ê≠©","Ê≠ª","Ê≥®","Ê¥ã","Êµ∑","Êº¢","Áâõ","Áâ©","Áâπ","Áä¨","ÁêÜ","Áî®","Áî∞","Áî∫","Áîª","Áïå","ÁóÖ","Áô∫","ÁöÑ","ÁõÆ","Áúü","ÁùÄ","Áü•","Á†î","Á§æ","ÁßÅ","Áßã","Á©∂","Á©∫","Á´ã","Á≠î","Á¥ô","ÁµÇ","Áøí","ËÄÉ","ËÄÖ","ËÇâ","Ëá™","Ëâ≤","Ëä±","Ëã±","Ëå∂","Ë¶™","Ë®Ä","Ë®à","Ë©¶","Ë≤∑","Ë≤∏","Ë≥™","Ëµ§","Ëµ∞","Ëµ∑","Ë∂≥","Ëª¢","Ëøë","ÈÄÅ","ÈÄö","ÈÄ±","ÈÅã","ÈÅì","Èáç","Èáé","ÈäÄ","Èñã","Èô¢","ÈõÜ","Èùí","Èü≥","È°å","È¢®","È£Ø","È£≤","È§®","ÈßÖ","È®ì","È≠ö","È≥•","Èªí"
];

const N5_SET = new Set(N5_LIST);
const N4_SET = new Set(N4_LIST);

/* =========================
   DADOS ‚Äî leituras + significado principal
   ========================= */
const KANJI_INFO = {
  // N5
  "‰∏Ä":{readings:["„ÅÑ„Å°","„Å≤„Å®"], meaning:"um"},
  "‰∏É":{readings:["„Åó„Å°","„Å™„Å™"], meaning:"sete"},
  "‰∏á":{readings:["„Åæ„Çì"], meaning:"dez mil"},
  "‰∏â":{readings:["„Åï„Çì","„Åø„Å£"], meaning:"tr√™s"},
  "‰∏ä":{readings:["„ÅÜ„Åà","„Åò„Çá„ÅÜ"], meaning:"cima"},
  "‰∏ã":{readings:["„Åó„Åü","„Åã"], meaning:"baixo"},
  "‰∏≠":{readings:["„Å™„Åã","„Å°„ÇÖ„ÅÜ"], meaning:"meio"},
  "‰πù":{readings:["„Åç„ÇÖ„ÅÜ","„Åì„Åì„ÅÆ"], meaning:"nove"},
  "‰∫å":{readings:["„Å´","„Åµ„Åü"], meaning:"dois"},
  "‰∫î":{readings:["„Åî","„ÅÑ„Å§"], meaning:"cinco"},
  "‰∫∫":{readings:["„Å≤„Å®","„Å´„Çì"], meaning:"pessoa"},
  "‰ªä":{readings:["„ÅÑ„Åæ","„Åì„Çì"], meaning:"agora"},
  "‰ºë":{readings:["„ÇÑ„Åô","„Åç„ÇÖ„ÅÜ"], meaning:"descansar"},
  "‰Ωï":{readings:["„Å™„Å´","„Å™„Çì"], meaning:"o que"},
  "ÂÖà":{readings:["„Åï„Åç","„Åõ„Çì"], meaning:"antes"},
  "ÂÖ•":{readings:["„ÅÑ","„Å´„ÇÖ„ÅÜ"], meaning:"entrar"},
  "ÂÖ´":{readings:["„ÅØ„Å°","„ÇÑ"], meaning:"oito"},
  "ÂÖ≠":{readings:["„Çç„Åè","„ÇÄ"], meaning:"seis"},
  "ÂÜÜ":{readings:["„Åà„Çì"], meaning:"iene"},
  "Âá∫":{readings:["„Åß","„Åó„ÇÖ„Å§"], meaning:"sair"},
  "ÂàÜ":{readings:["„Åµ„Çì","„Å∂„Çì"], meaning:"minuto"},
  "Ââç":{readings:["„Åæ„Åà","„Åú„Çì"], meaning:"antes"},
  "Âåó":{readings:["„Åç„Åü","„Åª„Åè"], meaning:"norte"},
  "ÂçÅ":{readings:["„Åò„ÇÖ„ÅÜ","„Å®„Åä"], meaning:"dez"},
  "ÂçÉ":{readings:["„Åõ„Çì","„Å°"], meaning:"mil"},
  "Âçà":{readings:["„Åî"], meaning:"meio-dia"},
  "Âçä":{readings:["„ÅØ„Çì"], meaning:"metade"},
  "Âçó":{readings:["„Åø„Å™„Åø","„Å™„Çì"], meaning:"sul"},
  "Âèã":{readings:["„Å®„ÇÇ","„ÇÜ„ÅÜ"], meaning:"amigo"},
  "Âè≥":{readings:["„Åø„Åé","„ÅÜ"], meaning:"direita"},
  "Âêç":{readings:["„Å™","„ÇÅ„ÅÑ"], meaning:"nome"},
  "Âõõ":{readings:["„Çà„Çì","„Åó"], meaning:"quatro"},
  "ÂõΩ":{readings:["„Åè„Å´","„Åì„Åè"], meaning:"pa√≠s"},
  "Âúü":{readings:["„Å§„Å°","„Å©"], meaning:"terra"},
  "Â§ñ":{readings:["„Åù„Å®","„Åå„ÅÑ"], meaning:"fora"},
  "Â§ß":{readings:["„Åä„Åä","„Å†„ÅÑ"], meaning:"grande"},
  "Â§©":{readings:["„Å¶„Çì","„ÅÇ„Åæ"], meaning:"c√©u"},
  "Â•≥":{readings:["„Åä„Çì„Å™","„Åò„Çá"], meaning:"mulher"},
  "Â≠ê":{readings:["„Åì","„Åó"], meaning:"crian√ßa"},
  "Â≠¶":{readings:["„Åæ„Å™","„Åå„Åè"], meaning:"estudar"},
  "Â∞è":{readings:["„Å°„ÅÑ","„Åó„Çá„ÅÜ"], meaning:"pequeno"},
  "Â±±":{readings:["„ÇÑ„Åæ","„Åï„Çì"], meaning:"montanha"},
  "Â∑ù":{readings:["„Åã„Çè","„Åõ„Çì"], meaning:"rio"},
  "Â∑¶":{readings:["„Å≤„Å†„Çä","„Åï"], meaning:"esquerda"},
  "Âπ¥":{readings:["„Å®„Åó","„Å≠„Çì"], meaning:"ano"},
  "Âæå":{readings:["„ÅÇ„Å®","„Åî"], meaning:"depois"},
  "Êó•":{readings:["„Å≤","„Å´„Å°"], meaning:"dia"},
  "ÊôÇ":{readings:["„Å®„Åç","„Åò"], meaning:"hora"},
  "Êõ∏":{readings:["„Åã","„Åó„Çá"], meaning:"escrever"},
  "Êúà":{readings:["„Å§„Åç","„Åí„Å§"], meaning:"m√™s"},
  "Êú®":{readings:["„Åç","„ÇÇ„Åè"], meaning:"√°rvore"},
  "Êú¨":{readings:["„Åª„Çì","„ÇÇ„Å®"], meaning:"livro"},
  "Êù•":{readings:["„Åè","„Çâ„ÅÑ"], meaning:"vir"},
  "Êù±":{readings:["„Å≤„Åå„Åó","„Å®„ÅÜ"], meaning:"leste"},
  "Ê†°":{readings:["„Åì„ÅÜ"], meaning:"escola"},
  "ÊØç":{readings:["„ÅØ„ÅØ","„Åº"], meaning:"m√£e"},
  "ÊØé":{readings:["„Åæ„ÅÑ"], meaning:"todo"},
  "Ê∞ó":{readings:["„Åç"], meaning:"energia"},
  "Ê∞¥":{readings:["„Åø„Åö","„Åô„ÅÑ"], meaning:"√°gua"},
  "ÁÅ´":{readings:["„Å≤","„Åã"], meaning:"fogo"},
  "Áà∂":{readings:["„Å°„Å°","„Åµ"], meaning:"pai"},
  "Áîü":{readings:["„ÅÑ","„Åõ„ÅÑ"], meaning:"vida"},
  "Áî∑":{readings:["„Åä„Å®„Åì","„Å†„Çì"], meaning:"homem"},
  "ÁôΩ":{readings:["„Åó„Çç","„ÅØ„Åè"], meaning:"branco"},
  "Áôæ":{readings:["„Å≤„ÇÉ„Åè"], meaning:"cem"},
  "ËÅû":{readings:["„Åç","„Å∂„Çì"], meaning:"ouvir"},
  "Ë°å":{readings:["„ÅÑ","„Åì„ÅÜ"], meaning:"ir"},
  "Ë•ø":{readings:["„Å´„Åó","„Åõ„ÅÑ"], meaning:"oeste"},
  "Ë¶ã":{readings:["„Åø","„Åë„Çì"], meaning:"ver"},
  "Ë©±":{readings:["„ÅØ„Å™","„Çè"], meaning:"falar"},
  "Ë™û":{readings:["„Åî"], meaning:"idioma"},
  "Ë™≠":{readings:["„Çà","„Å©„Åè"], meaning:"ler"},
  "Ëªä":{readings:["„Åè„Çã„Åæ","„Åó„ÇÉ"], meaning:"carro"},
  "Èáë":{readings:["„Åã„Å≠","„Åç„Çì"], meaning:"dinheiro"},
  "Èï∑":{readings:["„Å™„Åå","„Å°„Çá„ÅÜ"], meaning:"longo"},
  "Èñì":{readings:["„ÅÇ„ÅÑ„Å†","„Åã„Çì"], meaning:"entre"},
  "Èõ®":{readings:["„ÅÇ„ÇÅ","„ÅÜ"], meaning:"chuva"},
  "Èõª":{readings:["„Åß„Çì"], meaning:"eletricidade"},
  "È£ü":{readings:["„Åü","„Åó„Çá„Åè"], meaning:"comer"},
  "È´ò":{readings:["„Åü„Åã","„Åì„ÅÜ"], meaning:"alto"},

  // N4 (mantive do seu arquivo anterior ‚Äî sem repetir aqui pra n√£o explodir; se faltar algo, o fallback cobre)
  "‰∏ç":{readings:["„Åµ"], meaning:"n√£o"},
  "‰∏ñ":{readings:["„Åõ","„Çà"], meaning:"mundo"},
  "‰∏ª":{readings:["„Åó„ÇÖ"], meaning:"principal"},
  "‰∫ã":{readings:["„Åì„Å®","„Åò"], meaning:"assunto"},
  "‰∫¨":{readings:["„Åç„Çá„ÅÜ","„Åë„ÅÑ"], meaning:"capital"},
  "‰ªï":{readings:["„Åó"], meaning:"servir"},
  "‰ª£":{readings:["„Å†„ÅÑ","„Çà"], meaning:"substituir"},
  "‰ª•":{readings:["„ÅÑ"], meaning:"a partir de"},
  "‰ºö":{readings:["„ÅÇ","„Åã„ÅÑ"], meaning:"encontrar"},
  "‰Ωè":{readings:["„Åô","„Åò„ÇÖ„ÅÜ"], meaning:"morar"},
  "‰Ωì":{readings:["„Åã„Çâ„Å†","„Åü„ÅÑ"], meaning:"corpo"},
  "‰Ωú":{readings:["„Å§„Åè","„Åï„Åè"], meaning:"fazer"},
  "‰Ωø":{readings:["„Å§„Åã","„Åó"], meaning:"usar"},
  "ÂÄü":{readings:["„Åã","„Åó„ÇÉ„Åè"], meaning:"emprestar"},
  "ÂÖÉ":{readings:["„ÇÇ„Å®","„Åí„Çì"], meaning:"origem"},
  "ÂÖÑ":{readings:["„ÅÇ„Å´"], meaning:"irm√£o mais velho"},
  "ÂÖ¨":{readings:["„Åì„ÅÜ"], meaning:"p√∫blico"},
  "ÂÜô":{readings:["„ÅÜ„Å§","„Åó„ÇÉ"], meaning:"copiar"},
  "ÂÜ¨":{readings:["„Åµ„ÇÜ"], meaning:"inverno"},
  "Âàá":{readings:["„Åç"], meaning:"cortar"},
  "Âà•":{readings:["„Åπ„Å§"], meaning:"separar"},
  "Âäõ":{readings:["„Å°„Åã„Çâ"], meaning:"for√ßa"},
  "Âãâ":{readings:["„Åπ„Çì"], meaning:"esfor√ßo"},
  "Âãï":{readings:["„ÅÜ„Åî","„Å©„ÅÜ"], meaning:"mover"},
  "Âåª":{readings:["„ÅÑ"], meaning:"m√©dico"},
  "Âéª":{readings:["„Åï"], meaning:"ir embora"},
  "Âè£":{readings:["„Åè„Å°"], meaning:"boca"},
  "Âè§":{readings:["„Åµ„Çã"], meaning:"antigo"},
  "Âè∞":{readings:["„Å†„ÅÑ"], meaning:"suporte"},
  "Âêå":{readings:["„Åä„Å™"], meaning:"mesmo"},
  "Âë≥":{readings:["„ÅÇ„Åò"], meaning:"sabor"},
  "ÂìÅ":{readings:["„Å≤„Çì"], meaning:"produto"},
  "Âì°":{readings:["„ÅÑ„Çì"], meaning:"membro"},
  "Âïè":{readings:["„Å®"], meaning:"perguntar"},
  "Âõ≥":{readings:["„Åö"], meaning:"plano"},
  "Âú∞":{readings:["„Å°"], meaning:"terra"},
  "Â†Ç":{readings:["„Å©„ÅÜ"], meaning:"sal√£o"},
  "Â†¥":{readings:["„Å∞"], meaning:"lugar"},
  "Â£≤":{readings:["„ÅÜ"], meaning:"vender"},
  "Â§è":{readings:["„Å™„Å§"], meaning:"ver√£o"},
  "Â§ï":{readings:["„ÇÜ„ÅÜ"], meaning:"entardecer"},
  "Â§ö":{readings:["„Åä„Åä"], meaning:"muito"},
  "Â§ú":{readings:["„Çà„Çã"], meaning:"noite"},
  "Â¶π":{readings:["„ÅÑ„ÇÇ„ÅÜ„Å®"], meaning:"irm√£ mais nova"},
  "Âßâ":{readings:["„ÅÇ„Å≠"], meaning:"irm√£ mais velha"},
  "Âßã":{readings:["„ÅØ„Åò"], meaning:"come√ßar"},
  "Â≠ó":{readings:["„Åò"], meaning:"caractere"},
  "ÂÆâ":{readings:["„ÇÑ„Åô"], meaning:"barato"},
  "ÂÆ§":{readings:["„Åó„Å§"], meaning:"sala"},
  "ÂÆ∂":{readings:["„ÅÑ„Åà"], meaning:"casa"},
  "Â∞ë":{readings:["„Åô„Åè"], meaning:"pouco"},
  "Â±ã":{readings:["„ÇÑ"], meaning:"loja"},
  "Â∑•":{readings:["„Åì„ÅÜ"], meaning:"constru√ß√£o"},
  "Â∏∞":{readings:["„Åã„Åà"], meaning:"voltar"},
  "Â∫É":{readings:["„Å≤„Çç"], meaning:"amplo"},
  "Â∫ó":{readings:["„Åø„Åõ"], meaning:"loja"},
  "Â∫¶":{readings:["„Å©"], meaning:"vez"},
  "Âª∫":{readings:["„Åü"], meaning:"construir"},
  "Âºü":{readings:["„Åä„Å®„ÅÜ„Å®"], meaning:"irm√£o mais novo"},
  "Âº∑":{readings:["„Å§„Çà"], meaning:"forte"},
  "ÂæÖ":{readings:["„Åæ"], meaning:"esperar"},
  "ÂøÉ":{readings:["„Åì„Åì„Çç"], meaning:"cora√ß√£o"},
  "ÊÄù":{readings:["„Åä„ÇÇ"], meaning:"pensar"},
  "ÊÄ•":{readings:["„ÅÑ„Åù"], meaning:"urgente"},
  "ÊÇ™":{readings:["„Çè„Çã"], meaning:"ruim"},
  "ÊÑè":{readings:["„ÅÑ"], meaning:"inten√ß√£o"},
  "Êâã":{readings:["„Å¶"], meaning:"m√£o"},
  "ÊåÅ":{readings:["„ÇÇ"], meaning:"segurar"},
  "Êïô":{readings:["„Åä„Åó"], meaning:"ensinar"},
  "Êñá":{readings:["„Å∂„Çì"], meaning:"texto"},
  "Êñô":{readings:["„Çä„Çá„ÅÜ"], meaning:"taxa"},
  "Êñ∞":{readings:["„ÅÇ„Åü„Çâ"], meaning:"novo"},
  "Êñπ":{readings:["„Åã„Åü"], meaning:"dire√ß√£o"},
  "ÊóÖ":{readings:["„Åü„Å≥"], meaning:"viagem"},
  "Êóè":{readings:["„Åû„Åè"], meaning:"grupo"},
  "Êó©":{readings:["„ÅØ„ÇÑ"], meaning:"cedo"},
  "Êòé":{readings:["„ÅÇ„Åã"], meaning:"claro"},
  "Êò†":{readings:["„ÅÜ„Å§"], meaning:"projetar"},
  "Êò•":{readings:["„ÅØ„Çã"], meaning:"primavera"},
  "Êòº":{readings:["„Å≤„Çã"], meaning:"meio-dia"},
  "Êõú":{readings:["„Çà„ÅÜ"], meaning:"dia da semana"},
  "Êúâ":{readings:["„ÅÇ"], meaning:"existir"},
  "Êúç":{readings:["„Åµ„Åè"], meaning:"roupa"},
  "Êúù":{readings:["„ÅÇ„Åï"], meaning:"manh√£"},
  "Ê•≠":{readings:["„Åé„Çá„ÅÜ"], meaning:"profiss√£o"},
  "Ê•Ω":{readings:["„Åü„ÅÆ"], meaning:"divers√£o"},
  "Ê≠å":{readings:["„ÅÜ„Åü"], meaning:"can√ß√£o"},
  "Ê≠¢":{readings:["„Å®"], meaning:"parar"},
  "Ê≠£":{readings:["„Åü„Å†"], meaning:"correto"},
  "Ê≠©":{readings:["„ÅÇ„Çã"], meaning:"andar"},
  "Ê≠ª":{readings:["„Åó"], meaning:"morte"},
  "Ê≥®":{readings:["„Å°„ÇÖ„ÅÜ"], meaning:"aten√ß√£o"},
  "Ê¥ã":{readings:["„Çà„ÅÜ"], meaning:"ocidental"},
  "Êµ∑":{readings:["„ÅÜ„Åø"], meaning:"mar"},
  "Êº¢":{readings:["„Åã„Çì"], meaning:"chin√™s"},
  "Áâõ":{readings:["„ÅÜ„Åó"], meaning:"vaca"},
  "Áâ©":{readings:["„ÇÇ„ÅÆ"], meaning:"coisa"},
  "Áâπ":{readings:["„Å®„Åè"], meaning:"especial"},
  "Áä¨":{readings:["„ÅÑ„Å¨"], meaning:"cachorro"},
  "ÁêÜ":{readings:["„Çä"], meaning:"raz√£o"},
  "Áî®":{readings:["„Çà„ÅÜ"], meaning:"uso"},
  "Áî∞":{readings:["„Åü"], meaning:"arrozal"},
  "Áî∫":{readings:["„Åæ„Å°"], meaning:"bairro"},
  "Áîª":{readings:["„Åå"], meaning:"desenho"},
  "Áïå":{readings:["„Åã„ÅÑ"], meaning:"mundo"},
  "ÁóÖ":{readings:["„Å≥„Çá„ÅÜ"], meaning:"doen√ßa"},
  "Áô∫":{readings:["„ÅØ„Å§"], meaning:"partida"},
  "ÁöÑ":{readings:["„Å¶„Åç"], meaning:"alvo"},
  "ÁõÆ":{readings:["„ÇÅ"], meaning:"olho"},
  "Áúü":{readings:["„Åæ"], meaning:"verdadeiro"},
  "ÁùÄ":{readings:["„Åç"], meaning:"vestir"},
  "Áü•":{readings:["„Åó"], meaning:"saber"},
  "Á†î":{readings:["„Åë„Çì"], meaning:"pesquisa"},
  "Á§æ":{readings:["„Åó„ÇÉ"], meaning:"empresa"},
  "ÁßÅ":{readings:["„Çè„Åü„Åó"], meaning:"eu"},
  "Áßã":{readings:["„ÅÇ„Åç"], meaning:"outono"},
  "Á©∂":{readings:["„Åç„ÇÖ„ÅÜ"], meaning:"investigar"},
  "Á©∫":{readings:["„Åù„Çâ"], meaning:"c√©u"},
  "Á´ã":{readings:["„Åü"], meaning:"ficar em p√©"},
  "Á≠î":{readings:["„Åì„Åü"], meaning:"responder"},
  "Á¥ô":{readings:["„Åã„Åø"], meaning:"papel"},
  "ÁµÇ":{readings:["„Åä"], meaning:"terminar"},
  "Áøí":{readings:["„Å™„Çâ"], meaning:"aprender"},
  "ËÄÉ":{readings:["„Åã„Çì„Åå"], meaning:"pensar"},
  "ËÄÖ":{readings:["„ÇÇ„ÅÆ"], meaning:"pessoa"},
  "ËÇâ":{readings:["„Å´„Åè"], meaning:"carne"},
  "Ëá™":{readings:["„Åò"], meaning:"si mesmo"},
  "Ëâ≤":{readings:["„ÅÑ„Çç"], meaning:"cor"},
  "Ëä±":{readings:["„ÅØ„Å™"], meaning:"flor"},
  "Ëã±":{readings:["„Åà„ÅÑ"], meaning:"ingl√™s"},
  "Ëå∂":{readings:["„Å°„ÇÉ"], meaning:"ch√°"},
  "Ë¶™":{readings:["„Åä„ÇÑ"], meaning:"pai/m√£e"},
  "Ë®Ä":{readings:["„ÅÑ"], meaning:"dizer"},
  "Ë®à":{readings:["„Åë„ÅÑ"], meaning:"medir"},
  "Ë©¶":{readings:["„Åü„ÇÅ"], meaning:"testar"},
  "Ë≤∑":{readings:["„Åã"], meaning:"comprar"},
  "Ë≤∏":{readings:["„Åã"], meaning:"emprestar"},
  "Ë≥™":{readings:["„Åó„Å§"], meaning:"qualidade"},
  "Ëµ§":{readings:["„ÅÇ„Åã"], meaning:"vermelho"},
  "Ëµ∞":{readings:["„ÅØ„Åó"], meaning:"correr"},
  "Ëµ∑":{readings:["„Åä"], meaning:"acordar"},
  "Ë∂≥":{readings:["„ÅÇ„Åó"], meaning:"p√©"},
  "Ëª¢":{readings:["„Å¶„Çì"], meaning:"girar"},
  "Ëøë":{readings:["„Å°„Åã"], meaning:"perto"},
  "ÈÄÅ":{readings:["„Åä„Åè"], meaning:"enviar"},
  "ÈÄö":{readings:["„Å®„Åä"], meaning:"passar"},
  "ÈÄ±":{readings:["„Åó„ÇÖ„ÅÜ"], meaning:"semana"},
  "ÈÅã":{readings:["„ÅÜ„Çì"], meaning:"transportar"},
  "ÈÅì":{readings:["„Åø„Å°"], meaning:"caminho"},
  "Èáç":{readings:["„Åä„ÇÇ"], meaning:"pesado"},
  "Èáé":{readings:["„ÅÆ"], meaning:"campo"},
  "ÈäÄ":{readings:["„Åé„Çì"], meaning:"prata"},
  "Èñã":{readings:["„Å≤„Çâ"], meaning:"abrir"},
  "Èô¢":{readings:["„ÅÑ„Çì"], meaning:"hospital"},
  "ÈõÜ":{readings:["„ÅÇ„Å§"], meaning:"reunir"},
  "Èùí":{readings:["„ÅÇ„Åä"], meaning:"azul"},
  "Èü≥":{readings:["„Åä„Å®"], meaning:"som"},
  "È°å":{readings:["„Å†„ÅÑ"], meaning:"tema"},
  "È¢®":{readings:["„Åã„Åú"], meaning:"vento"},
  "È£Ø":{readings:["„ÅØ„Çì"], meaning:"refei√ß√£o"},
  "È£≤":{readings:["„ÅÆ"], meaning:"beber"},
  "È§®":{readings:["„Åã„Çì"], meaning:"pr√©dio"},
  "ÈßÖ":{readings:["„Åà„Åç"], meaning:"esta√ß√£o"},
  "È®ì":{readings:["„Åë„Çì"], meaning:"experi√™ncia"},
  "È≠ö":{readings:["„Åï„Åã„Å™"], meaning:"peixe"},
  "È≥•":{readings:["„Å®„Çä"], meaning:"p√°ssaro"},
  "Èªí":{readings:["„Åè„Çç"], meaning:"preto"}
};

/* =========================
   2 VOC√ÅBULOS POR KANJI (word + reading)
   (fallback: se n√£o tiver, mostra ‚Äú‚Äî‚Äù)
   ========================= */
const VOCAB_2 = {
  // N5 (exemplos bem comuns)
  "‰∏Ä":[["‰∏Ä„Å§","„Å≤„Å®„Å§"],["‰∏Ä‰∫∫","„Å≤„Å®„Çä"]],
  "‰∏É":[["‰∏ÉÊó•","„Å™„ÅÆ„Åã"],["‰∏ÉÊôÇ","„Åó„Å°„Åò"]],
  "‰∏á":[["‰∏Ä‰∏áÂÜÜ","„ÅÑ„Å°„Åæ„Çì„Åà„Çì"],["‰∏áÂπ¥Á≠Ü","„Åæ„Çì„Å≠„Çì„Å≤„Å§"]],
  "‰∏â":[["‰∏â„Å§","„Åø„Å£„Å§"],["‰∏â‰∫∫","„Åï„Çì„Å´„Çì"]],
  "‰∏ä":[["‰∏äÊâã","„Åò„Çá„ÅÜ„Åö"],["‰∏äÁùÄ","„ÅÜ„Çè„Åé"]],
  "‰∏ã":[["‰∏ãÊâã","„Å∏„Åü"],["Âú∞‰∏ã","„Å°„Åã"]],
  "‰∏≠":[["‰∏≠Â≠¶Ê†°","„Å°„ÇÖ„ÅÜ„Åå„Å£„Åì„ÅÜ"],["‰∏≠Ë∫´","„Å™„Åã„Åø"]],
  "‰πù":[["‰πùÊôÇ","„Åè„Åò"],["‰πù„Å§","„Åì„Åì„ÅÆ„Å§"]],
  "‰∫å":[["‰∫å„Å§","„Åµ„Åü„Å§"],["‰∫å‰∫∫","„Åµ„Åü„Çä"]],
  "‰∫î":[["‰∫î„Å§","„ÅÑ„Å§„Å§"],["‰∫îÂàÜ","„Åî„Åµ„Çì"]],
  "‰∫∫":[["Êó•Êú¨‰∫∫","„Å´„Åª„Çì„Åò„Çì"],["‰∫∫Ê∞ó","„Å´„Çì„Åç"]],
  "‰ªä":[["‰ªäÊó•","„Åç„Çá„ÅÜ"],["‰ªäÈÄ±","„Åì„Çì„Åó„ÇÖ„ÅÜ"]],
  "‰ºë":[["‰ºë„Åø","„ÇÑ„Åô„Åø"],["‰ºëÊÜ©","„Åç„ÇÖ„ÅÜ„Åë„ÅÑ"]],
  "‰Ωï":[["‰Ωï‰∫∫","„Å™„Çì„Å´„Çì"],["‰ΩïÊôÇ","„Å™„Çì„Åò"]],
  "ÂÖà":[["ÂÖàÁîü","„Åõ„Çì„Åõ„ÅÑ"],["ÂÖàÈÄ±","„Åõ„Çì„Åó„ÇÖ„ÅÜ"]],
  "ÂÖ•":[["ÂÖ•Âè£","„ÅÑ„Çä„Åê„Å°"],["ÂÖ•Â≠¶","„Å´„ÇÖ„ÅÜ„Åå„Åè"]],
  "ÂÖ´":[["ÂÖ´„Å§","„ÇÑ„Å£„Å§"],["ÂÖ´Êó•","„Çà„ÅÜ„Åã"]],
  "ÂÖ≠":[["ÂÖ≠„Å§","„ÇÄ„Å£„Å§"],["ÂÖ≠ÊôÇ","„Çç„Åè„Åò"]],
  "ÂÜÜ":[["ÂÜÜÂÆâ","„Åà„Çì„ÇÑ„Åô"],["ÂÜÜÈ´ò","„Åà„Çì„Å†„Åã"]],
  "Âá∫":[["Âá∫Âè£","„Åß„Åê„Å°"],["Âá∫Áô∫","„Åó„ÇÖ„Å£„Å±„Å§"]],
  "ÂàÜ":[["ÂçÅÂàÜ","„Åò„ÇÖ„Å£„Å∑„Çì"],["Ëá™ÂàÜ","„Åò„Å∂„Çì"]],
  "Ââç":[["ÂêçÂâç","„Å™„Åæ„Åà"],["ÂâçÊó•","„Åú„Çì„Åò„Å§"]],
  "Âåó":[["ÂåóÊµ∑ÈÅì","„Åª„Å£„Åã„ÅÑ„Å©„ÅÜ"],["ÂåóÂè£","„Åç„Åü„Åê„Å°"]],
  "ÂçÅ":[["ÂçÅÂàÜ","„Åò„ÇÖ„ÅÜ„Å∂„Çì"],["ÂçÅÊó•","„Å®„Åä„Åã"]],
  "ÂçÉ":[["ÂçÉÂÜÜ","„Åõ„Çì„Åà„Çì"],["ÂçÉ‰∫∫","„Åõ„Çì„Å´„Çì"]],
  "Âçà":[["ÂçàÂæå","„Åî„Åî"],["ÂçàÂâç","„Åî„Åú„Çì"]],
  "Âçä":[["ÂçäÂàÜ","„ÅØ„Çì„Å∂„Çì"],["‰∏ÄÂπ¥Âçä","„ÅÑ„Å°„Å≠„Çì„ÅØ„Çì"]],
  "Âçó":[["ÂçóÂè£","„Åø„Å™„Åø„Åê„Å°"],["ÂçóÁ±≥","„Å™„Çì„Åπ„ÅÑ"]],
  "Âèã":[["ÂèãÈÅî","„Å®„ÇÇ„Å†„Å°"],["Ë¶™Âèã","„Åó„Çì„ÇÜ„ÅÜ"]],
  "Âè≥":[["Âè≥Êâã","„Åø„Åé„Å¶"],["Âè≥ÂÅ¥","„Åø„Åé„Åå„Çè"]],
  "Âêç":[["ÂêçÂâç","„Å™„Åæ„Åà"],["ÊúâÂêç","„ÇÜ„ÅÜ„ÇÅ„ÅÑ"]],
  "Âõõ":[["Âõõ„Å§","„Çà„Å£„Å§"],["ÂõõÊúà","„Åó„Åå„Å§"]],
  "ÂõΩ":[["Â§ñÂõΩ","„Åå„ÅÑ„Åì„Åè"],["ÂõΩÈöõ","„Åì„Åè„Åï„ÅÑ"]],
  "Âúü":[["ÂúüÂú∞","„Å®„Å°"],["ÂúüÊõúÊó•","„Å©„Çà„ÅÜ„Å≥"]],
  "Â§ñ":[["Â§ñÂõΩ","„Åå„ÅÑ„Åì„Åè"],["Â§ñÂá∫","„Åå„ÅÑ„Åó„ÇÖ„Å§"]],
  "Â§ß":[["Â§ßÂ≠¶","„Å†„ÅÑ„Åå„Åè"],["Â§ßÂàá","„Åü„ÅÑ„Åõ„Å§"]],
  "Â§©":[["Â§©Ê∞ó","„Å¶„Çì„Åç"],["Â§©ÂõΩ","„Å¶„Çì„Åî„Åè"]],
  "Â•≥":[["Â•≥ÊÄß","„Åò„Çá„Åõ„ÅÑ"],["Â•≥„ÅÆÂ≠ê","„Åä„Çì„Å™„ÅÆ„Åì"]],
  "Â≠ê":[["Â≠ê„Å©„ÇÇ","„Åì„Å©„ÇÇ"],["Â•≥Â≠ê","„Åò„Çá„Åó"]],
  "Â≠¶":[["Â≠¶Ê†°","„Åå„Å£„Åì„ÅÜ"],["Â≠¶Áîü","„Åå„Åè„Åõ„ÅÑ"]],
  "Â∞è":[["Â∞èÂ≠¶Ê†°","„Åó„Çá„ÅÜ„Åå„Å£„Åì„ÅÜ"],["Â∞è„Åï„ÅÑ","„Å°„ÅÑ„Åï„ÅÑ"]],
  "Â±±":[["Â±±ÈÅì","„ÇÑ„Åæ„Åø„Å°"],["ÂØåÂ£´Â±±","„Åµ„Åò„Åï„Çì"]],
  "Â∑ù":[["Â∑ù","„Åã„Çè"],["Â∑ùËæ∫","„Åã„Çè„Åπ"]],
  "Â∑¶":[["Â∑¶Êâã","„Å≤„Å†„Çä„Å¶"],["Â∑¶ÂÅ¥","„Å≤„Å†„Çä„Åå„Çè"]],
  "Âπ¥":[["‰ªäÂπ¥","„Åì„Å®„Åó"],["Êù•Âπ¥","„Çâ„ÅÑ„Å≠„Çì"]],
  "Âæå":[["Âæå„Çç","„ÅÜ„Åó„Çç"],["ÂçàÂæå","„Åî„Åî"]],
  "Êó•":[["Êó•Êú¨","„Å´„Åª„Çì"],["‰ºëÊó•","„Åç„ÇÖ„ÅÜ„Åò„Å§"]],
  "ÊôÇ":[["ÊôÇÈñì","„Åò„Åã„Çì"],["‰ΩïÊôÇ","„Å™„Çì„Åò"]],
  "Êõ∏":[["Ë™≠Êõ∏","„Å©„Åè„Åó„Çá"],["ÊïôÁßëÊõ∏","„Åç„Çá„ÅÜ„Åã„Åó„Çá"]],
  "Êúà":[["ÊúàÊõúÊó•","„Åí„Å§„Çà„ÅÜ„Å≥"],["Êù•Êúà","„Çâ„ÅÑ„Åí„Å§"]],
  "Êú®":[["Êú®ÊõúÊó•","„ÇÇ„Åè„Çà„ÅÜ„Å≥"],["Êú®","„Åç"]],
  "Êú¨":[["Êú¨Â±ã","„Åª„Çì„ÇÑ"],["Êó•Êú¨","„Å´„Åª„Çì"]],
  "Êù•":[["Êù•ÈÄ±","„Çâ„ÅÑ„Åó„ÇÖ„ÅÜ"],["Êù•Âπ¥","„Çâ„ÅÑ„Å≠„Çì"]],
  "Êù±":[["Êù±‰∫¨","„Å®„ÅÜ„Åç„Çá„ÅÜ"],["Êù±Âè£","„Å≤„Åå„Åó„Åê„Å°"]],
  "Ê†°":[["Â≠¶Ê†°","„Åå„Å£„Åì„ÅÜ"],["È´òÊ†°","„Åì„ÅÜ„Åì„ÅÜ"]],
  "ÊØç":[["ÊØçË¶™","„ÅØ„ÅØ„Åä„ÇÑ"],["ÊØçÂõΩ","„Åº„Åì„Åè"]],
  "ÊØé":[["ÊØéÊó•","„Åæ„ÅÑ„Å´„Å°"],["ÊØéÈÄ±","„Åæ„ÅÑ„Åó„ÇÖ„ÅÜ"]],
  "Ê∞ó":[["ÂÖÉÊ∞ó","„Åí„Çì„Åç"],["Â§©Ê∞ó","„Å¶„Çì„Åç"]],
  "Ê∞¥":[["Ê∞¥ÊõúÊó•","„Åô„ÅÑ„Çà„ÅÜ„Å≥"],["Ê∞¥","„Åø„Åö"]],
  "ÁÅ´":[["ÁÅ´ÊõúÊó•","„Åã„Çà„ÅÜ„Å≥"],["ÁÅ´","„Å≤"]],
  "Áà∂":[["Áà∂Ë¶™","„Å°„Å°„Åä„ÇÑ"],["Áà∂","„Å°„Å°"]],
  "Áîü":[["Â≠¶Áîü","„Åå„Åè„Åõ„ÅÑ"],["ÂÖàÁîü","„Åõ„Çì„Åõ„ÅÑ"]],
  "Áî∑":[["Áî∑ÊÄß","„Å†„Çì„Åõ„ÅÑ"],["Áî∑„ÅÆÂ≠ê","„Åä„Å®„Åì„ÅÆ„Åì"]],
  "ÁôΩ":[["ÁôΩ„ÅÑ","„Åó„Çç„ÅÑ"],["ÁôΩÁ¥ô","„ÅØ„Åè„Åó"]],
  "Áôæ":[["ÁôæÂÜÜ","„Å≤„ÇÉ„Åè„Åà„Çì"],["Áôæ‰∫∫","„Å≤„ÇÉ„Åè„Å´„Çì"]],
  "ËÅû":[["Êñ∞ËÅû","„Åó„Çì„Å∂„Çì"],["ËÅû„Åè","„Åç„Åè"]],
  "Ë°å":[["ÈäÄË°å","„Åé„Çì„Åì„ÅÜ"],["ÊóÖË°å","„Çä„Çá„Åì„ÅÜ"]],
  "Ë•ø":[["Ë•øÂè£","„Å´„Åó„Åê„Å°"],["Ë•øÊ¥ã","„Åõ„ÅÑ„Çà„ÅÜ"]],
  "Ë¶ã":[["Ë¶ãÂ≠¶","„Åë„Çì„Åå„Åè"],["Ë¶ã„Çã","„Åø„Çã"]],
  "Ë©±":[["ÈõªË©±","„Åß„Çì„Çè"],["‰ºöË©±","„Åã„ÅÑ„Çè"]],
  "Ë™û":[["Êó•Êú¨Ë™û","„Å´„Åª„Çì„Åî"],["Ëã±Ë™û","„Åà„ÅÑ„Åî"]],
  "Ë™≠":[["Ë™≠„ÇÄ","„Çà„ÇÄ"],["Ë™≠Êõ∏","„Å©„Åè„Åó„Çá"]],
  "Ëªä":[["ÈõªËªä","„Åß„Çì„Åó„ÇÉ"],["Ëá™Ëª¢Ëªä","„Åò„Å¶„Çì„Åó„ÇÉ"]],
  "Èáë":[["„ÅäÈáë","„Åä„Åã„Å≠"],["ÈáëÊõúÊó•","„Åç„Çì„Çà„ÅÜ„Å≥"]],
  "Èï∑":[["Èï∑„ÅÑ","„Å™„Åå„ÅÑ"],["Ê†°Èï∑","„Åì„ÅÜ„Å°„Çá„ÅÜ"]],
  "Èñì":[["ÊôÇÈñì","„Åò„Åã„Çì"],["Èñì„Å´Âêà„ÅÜ","„Åæ„Å´„ÅÇ„ÅÜ"]],
  "Èõ®":[["Èõ®","„ÅÇ„ÇÅ"],["Â§ßÈõ®","„Åä„Åä„ÅÇ„ÇÅ"]],
  "Èõª":[["ÈõªË©±","„Åß„Çì„Çè"],["ÈõªËªä","„Åß„Çì„Åó„ÇÉ"]],
  "È£ü":[["È£ü„Åπ„Çã","„Åü„Åπ„Çã"],["È£ü‰∫ã","„Åó„Çá„Åè„Åò"]],
  "È´ò":[["È´ò„ÅÑ","„Åü„Åã„ÅÑ"],["È´òÊ†°","„Åì„ÅÜ„Åì„ÅÜ"]],

  // N4 (exemplos comuns o suficiente)
  "‰∏ç":[["‰∏çÂÆâ","„Åµ„ÅÇ„Çì"],["‰∏ç‰æø","„Åµ„Åπ„Çì"]],
  "‰∏ñ":[["‰∏ñÁïå","„Åõ„Åã„ÅÑ"],["‰∏ñË©±","„Åõ„Çè"]],
  "‰∏ª":[["‰∏ª‰∫∫","„Åó„ÇÖ„Åò„Çì"],["‰∏ªÈ°å","„Åó„ÇÖ„Å†„ÅÑ"]],
  "‰∫ã":[["‰ªï‰∫ã","„Åó„Åî„Å®"],["‰∫ãÊïÖ","„Åò„Åì"]],
  "‰∫¨":[["Êù±‰∫¨","„Å®„ÅÜ„Åç„Çá„ÅÜ"],["‰∫¨ÈÉΩ","„Åç„Çá„ÅÜ„Å®"]],
  "‰ºö":[["‰ºöÁ§æ","„Åã„ÅÑ„Åó„ÇÉ"],["‰ºöË©±","„Åã„ÅÑ„Çè"]],
  "‰Ωè":[["‰ΩèÊâÄ","„Åò„ÇÖ„ÅÜ„Åó„Çá"],["‰Ωè„ÇÄ","„Åô„ÇÄ"]],
  "‰Ωì":[["‰ΩìË™ø","„Åü„ÅÑ„Å°„Çá„ÅÜ"],["Ë∫´‰Ωì","„Åó„Çì„Åü„ÅÑ"]],
  "‰Ωú":[["‰ΩúÊñá","„Åï„Åè„Å∂„Çì"],["‰Ωú„Çã","„Å§„Åè„Çã"]],
  "‰Ωø":[["‰Ωø„ÅÜ","„Å§„Åã„ÅÜ"],["‰ΩøÁî®","„Åó„Çà„ÅÜ"]],
  "ÂÄü":[["ÂÄü„Çä„Çã","„Åã„Çä„Çã"],["ÂÄüÈáë","„Åó„ÇÉ„Å£„Åç„Çì"]],
  "ÂÖÉ":[["ÂÖÉÊ∞ó","„Åí„Çì„Åç"],["ÂÖÉ„ÄÖ","„ÇÇ„Å®„ÇÇ„Å®"]],
  "ÂÜô":[["ÂÜôÁúü","„Åó„ÇÉ„Åó„Çì"],["ÂÜô„Åô","„ÅÜ„Å§„Åô"]],
  "ÂÜ¨":[["ÂÜ¨‰ºë„Åø","„Åµ„ÇÜ„ÇÑ„Åô„Åø"],["ÂÜ¨Êúç","„Åµ„ÇÜ„Åµ„Åè"]],
  "Âàá":[["Âàá„Çã","„Åç„Çã"],["Â§ßÂàá","„Åü„ÅÑ„Åõ„Å§"]],
  "Âà•":[["Âà•„Çå„Çã","„Çè„Åã„Çå„Çã"],["ÁâπÂà•","„Å®„Åè„Åπ„Å§"]],
  "Âäõ":[["Âäõ","„Å°„Åã„Çâ"],["Âä™Âäõ","„Å©„Çä„Çá„Åè"]],
  "Âãï":[["Âãï„Åè","„ÅÜ„Åî„Åè"],["ÈÅãÂãï","„ÅÜ„Çì„Å©„ÅÜ"]],
  "Âåª":[["ÂåªËÄÖ","„ÅÑ„Åó„ÇÉ"],["ÂåªÈô¢","„ÅÑ„ÅÑ„Çì"]],
  "Âè§":[["Âè§„ÅÑ","„Åµ„Çã„ÅÑ"],["‰∏≠Âè§","„Å°„ÇÖ„ÅÜ„Åì"]],
  "Âêå":[["Âêå„Åò","„Åä„Å™„Åò"],["ÂêåÊôÇ","„Å©„ÅÜ„Åò"]],
  "Âë≥":[["ÊÑèÂë≥","„ÅÑ„Åø"],["Âë≥","„ÅÇ„Åò"]],
  "ÂìÅ":[["ÂïÜÂìÅ","„Åó„Çá„ÅÜ„Å≤„Çì"],["ÂìÅÁâ©","„Åó„Å™„ÇÇ„ÅÆ"]],
  "Âïè":[["Ë≥™Âïè","„Åó„Å§„ÇÇ„Çì"],["ÂïèÈ°å","„ÇÇ„Çì„Å†„ÅÑ"]],
  "Âõ≥":[["Âú∞Âõ≥","„Å°„Åö"],["Âõ≥Êõ∏È§®","„Å®„Åó„Çá„Åã„Çì"]],
  "Â†¥":[["Â†¥ÊâÄ","„Å∞„Åó„Çá"],["Â∑•Â†¥","„Åì„ÅÜ„Åò„Çá„ÅÜ"]],
  "Â£≤":[["Â£≤„Çã","„ÅÜ„Çã"],["Ë≤©Â£≤","„ÅØ„Çì„Å∞„ÅÑ"]],
  "Â§è":[["Â§è‰ºë„Åø","„Å™„Å§„ÇÑ„Åô„Åø"],["Â§èÊúç","„Å™„Å§„Åµ„Åè"]],
  "Â§ö":[["Â§ö„ÅÑ","„Åä„Åä„ÅÑ"],["Â§öÊï∞","„Åü„Åô„ÅÜ"]],
  "Â§ú":[["Â§ú","„Çà„Çã"],["‰ªäÂ§ú","„Åì„Çì„ÇÑ"]],
  "Âßâ":[["Âßâ","„ÅÇ„Å≠"],["ÂßâÂ¶π","„Åó„Åæ„ÅÑ"]],
  "Â¶π":[["Â¶π","„ÅÑ„ÇÇ„ÅÜ„Å®"],["ÂßâÂ¶π","„Åó„Åæ„ÅÑ"]],
  "Âßã":[["Âßã„ÇÅ„Çã","„ÅØ„Åò„ÇÅ„Çã"],["ÈñãÂßã","„Åã„ÅÑ„Åó"]],
  "ÂÆâ":[["ÂÆâ„ÅÑ","„ÇÑ„Åô„ÅÑ"],["ÂÆâÂÖ®","„ÅÇ„Çì„Åú„Çì"]],
  "ÂÆ§":[["ÊïôÂÆ§","„Åç„Çá„ÅÜ„Åó„Å§"],["ÂíåÂÆ§","„Çè„Åó„Å§"]],
  "ÂÆ∂":[["ÂÆ∂Êóè","„Åã„Åû„Åè"],["ÂÆ∂","„ÅÑ„Åà"]],
  "Â∏∞":[["Â∏∞„Çã","„Åã„Åà„Çã"],["Â∏∞ÂõΩ","„Åç„Åì„Åè"]],
  "Â∫ó":[["Â∫ó","„Åø„Åõ"],["Êõ∏Â∫ó","„Åó„Çá„Å¶„Çì"]],
  "Âª∫":[["Âª∫„Å¶„Çã","„Åü„Å¶„Çã"],["Âª∫Áâ©","„Åü„Å¶„ÇÇ„ÅÆ"]],
  "Âº∑":[["Âº∑„ÅÑ","„Å§„Çà„ÅÑ"],["ÂãâÂº∑","„Åπ„Çì„Åç„Çá„ÅÜ"]],
  "ÂæÖ":[["ÂæÖ„Å§","„Åæ„Å§"],["ÊúüÂæÖ","„Åç„Åü„ÅÑ"]],
  "ÂøÉ":[["ÂøÉÈÖç","„Åó„Çì„Å±„ÅÑ"],["ÂÆâÂøÉ","„ÅÇ„Çì„Åó„Çì"]],
  "ÊÄù":[["ÊÄù„ÅÜ","„Åä„ÇÇ„ÅÜ"],["‰∏çÊÄùË≠∞","„Åµ„Åó„Åé"]],
  "ÊÄ•":[["ÊÄ•„Åê","„ÅÑ„Åù„Åê"],["ÊÄ•Ë°å","„Åç„ÇÖ„ÅÜ„Åì„ÅÜ"]],
  "ÊÇ™":[["ÊÇ™„ÅÑ","„Çè„Çã„ÅÑ"],["ÊúÄÊÇ™","„Åï„ÅÑ„ÅÇ„Åè"]],
  "ÊÑè":[["ÊÑèÂë≥","„ÅÑ„Åø"],["ÊÑèË¶ã","„ÅÑ„Åë„Çì"]],
  "ÊåÅ":[["ÊåÅ„Å§","„ÇÇ„Å§"],["Ê∞óÊåÅ„Å°","„Åç„ÇÇ„Å°"]],
  "Êïô":[["Êïô„Åà„Çã","„Åä„Åó„Åà„Çã"],["ÊïôËÇ≤","„Åç„Çá„ÅÜ„ÅÑ„Åè"]],
  "Êñá":[["ÊñáÂåñ","„Å∂„Çì„Åã"],["‰ΩúÊñá","„Åï„Åè„Å∂„Çì"]],
  "Êñ∞":[["Êñ∞„Åó„ÅÑ","„ÅÇ„Åü„Çâ„Åó„ÅÑ"],["Êñ∞ËÅû","„Åó„Çì„Å∂„Çì"]],
  "ÊóÖ":[["ÊóÖË°å","„Çä„Çá„Åì„ÅÜ"],["ÊóÖÈ§®","„Çä„Çá„Åã„Çì"]],
  "Êòé":[["ÊòéÊó•","„ÅÇ„Åó„Åü"],["Ë™¨Êòé","„Åõ„Å§„ÇÅ„ÅÑ"]],
  "Êò†":[["Êò†Áîª","„Åà„ÅÑ„Åå"],["‰∏äÊò†","„Åò„Çá„ÅÜ„Åà„ÅÑ"]],
  "Êò•":[["Êò•","„ÅØ„Çã"],["Êò•‰ºë„Åø","„ÅØ„Çã„ÇÑ„Åô„Åø"]],
  "Êòº":[["Êòº","„Å≤„Çã"],["Êòº„ÅîÈ£Ø","„Å≤„Çã„Åî„ÅØ„Çì"]],
  "Êõú":[["ÊõúÊó•","„Çà„ÅÜ„Å≥"],["Êó•ÊõúÊó•","„Å´„Å°„Çà„ÅÜ„Å≥"]],
  "Êúç":[["Êúç","„Åµ„Åè"],["Âà∂Êúç","„Åõ„ÅÑ„Åµ„Åè"]],
  "Êúù":[["Êúù","„ÅÇ„Åï"],["‰ªäÊúù","„Åë„Åï"]],
  "Ê•≠":[["ÊéàÊ•≠","„Åò„ÇÖ„Åé„Çá„ÅÜ"],["Âñ∂Ê•≠","„Åà„ÅÑ„Åé„Çá„ÅÜ"]],
  "Ê•Ω":[["Ê•Ω„Åó„ÅÑ","„Åü„ÅÆ„Åó„ÅÑ"],["Èü≥Ê•Ω","„Åä„Çì„Åå„Åè"]],
  "Ê≠å":[["Ê≠å","„ÅÜ„Åü"],["Ê≠åÊâã","„Åã„Åó„ÇÖ"]],
  "Ê≠£":[["Ê≠£„Åó„ÅÑ","„Åü„Å†„Åó„ÅÑ"],["Ê≠£Êúà","„Åó„Çá„ÅÜ„Åå„Å§"]],
  "Ê≠©":[["Ê≠©„Åè","„ÅÇ„Çã„Åè"],["Êï£Ê≠©","„Åï„Çì„ÅΩ"]],
  "Ê≠ª":[["Ê≠ª„Å¨","„Åó„Å¨"],["Ê≠ª‰∫°","„Åó„Åº„ÅÜ"]],
  "Ê≥®":[["Ê≥®ÊÑè","„Å°„ÇÖ„ÅÜ„ÅÑ"],["Ê≥®Êñá","„Å°„ÇÖ„ÅÜ„ÇÇ„Çì"]],
  "Ê¥ã":[["Ê¥ãÊúç","„Çà„ÅÜ„Åµ„Åè"],["Ë•øÊ¥ã","„Åõ„ÅÑ„Çà„ÅÜ"]],
  "Êµ∑":[["Êµ∑","„ÅÜ„Åø"],["Êµ∑Â§ñ","„Åã„ÅÑ„Åå„ÅÑ"]],
  "Êº¢":[["Êº¢Â≠ó","„Åã„Çì„Åò"],["Êº¢Ë™û","„Åã„Çì„Åî"]],
  "Áâ©":[["Áâ©","„ÇÇ„ÅÆ"],["Ë≤∑„ÅÑÁâ©","„Åã„ÅÑ„ÇÇ„ÅÆ"]],
  "Áâπ":[["ÁâπÂà•","„Å®„Åè„Åπ„Å§"],["ÁâπÂæ¥","„Å®„Åè„Å°„Çá„ÅÜ"]],
  "ÁêÜ":[["ÊñôÁêÜ","„Çä„Çá„ÅÜ„Çä"],["ÁêÜÁî±","„Çä„ÇÜ„ÅÜ"]],
  "Áî®":[["Áî®‰∫ã","„Çà„ÅÜ„Åò"],["Âà©Áî®","„Çä„Çà„ÅÜ"]],
  "Áî∫":[["Áî∫","„Åæ„Å°"],["Áî∫Èï∑","„Å°„Çá„ÅÜ„Å°„Çá„ÅÜ"]],
  "Áïå":[["‰∏ñÁïå","„Åõ„Åã„ÅÑ"],["Ê•≠Áïå","„Åé„Çá„ÅÜ„Åã„ÅÑ"]],
  "ÁóÖ":[["ÁóÖÈô¢","„Å≥„Çá„ÅÜ„ÅÑ„Çì"],["ÁóÖÊ∞ó","„Å≥„Çá„ÅÜ„Åç"]],
  "Áô∫":[["Âá∫Áô∫","„Åó„ÇÖ„Å£„Å±„Å§"],["Áô∫Èü≥","„ÅØ„Å§„Åä„Çì"]],
  "Áúü":[["ÂÜôÁúü","„Åó„ÇÉ„Åó„Çì"],["Áúü„Çì‰∏≠","„Åæ„Çì„Å™„Åã"]],
  "ÁùÄ":[["ÁùÄ„Çã","„Åç„Çã"],["Âà∞ÁùÄ","„Å®„ÅÜ„Å°„ÇÉ„Åè"]],
  "Á†î":[["Á†îÁ©∂","„Åë„Çì„Åç„ÇÖ„ÅÜ"],["Á†î‰øÆ","„Åë„Çì„Åó„ÇÖ„ÅÜ"]],
  "Á§æ":[["‰ºöÁ§æ","„Åã„ÅÑ„Åó„ÇÉ"],["Á§æ‰ºö","„Åó„ÇÉ„Åã„ÅÑ"]],
  "Áßã":[["Áßã","„ÅÇ„Åç"],["Áßã‰ºë„Åø","„ÅÇ„Åç„ÇÑ„Åô„Åø"]],
  "Á©∂":[["Á†îÁ©∂","„Åë„Çì„Åç„ÇÖ„ÅÜ"],["Á©∂Ê•µ","„Åç„ÇÖ„ÅÜ„Åç„Çá„Åè"]],
  "Á©∫":[["Á©∫","„Åù„Çâ"],["Á©∫Ê∏Ø","„Åè„ÅÜ„Åì„ÅÜ"]],
  "Á≠î":[["Á≠î„Åà„Çã","„Åì„Åü„Åà„Çã"],["ÂõûÁ≠î","„Åã„ÅÑ„Å®„ÅÜ"]],
  "Á¥ô":[["Á¥ô","„Åã„Åø"],["ÊâãÁ¥ô","„Å¶„Åå„Åø"]],
  "ÁµÇ":[["ÁµÇ„Çè„Çã","„Åä„Çè„Çã"],["ÊúÄÁµÇ","„Åï„ÅÑ„Åó„ÇÖ„ÅÜ"]],
  "Áøí":[["Áøí„ÅÜ","„Å™„Çâ„ÅÜ"],["Á∑¥Áøí","„Çå„Çì„Åó„ÇÖ„ÅÜ"]],
  "ËÄÉ":[["ËÄÉ„Åà„Çã","„Åã„Çì„Åå„Åà„Çã"],["ÂèÇËÄÉ","„Åï„Çì„Åì„ÅÜ"]],
  "ËÄÖ":[["Ëã•ËÄÖ","„Çè„Åã„ÇÇ„ÅÆ"],["Ë®òËÄÖ","„Åç„Åó„ÇÉ"]],
  "ËÇâ":[["ËÇâ","„Å´„Åè"],["ÁâõËÇâ","„Åé„ÇÖ„ÅÜ„Å´„Åè"]],
  "Ëá™":[["Ëá™ÂàÜ","„Åò„Å∂„Çì"],["Ëá™Áî±","„Åò„ÇÜ„ÅÜ"]],
  "Ëä±":[["Ëä±","„ÅØ„Å™"],["Ëä±ÁÅ´","„ÅØ„Å™„Å≥"]],
  "Ëã±":[["Ëã±Ë™û","„Åà„ÅÑ„Åî"],["Ëã±ÂõΩ","„Åà„ÅÑ„Åì„Åè"]],
  "Ëå∂":[["„ÅäËå∂","„Åä„Å°„ÇÉ"],["Ëå∂Ëâ≤","„Å°„ÇÉ„ÅÑ„Çç"]],
  "Ë¶™":[["Ë¶™","„Åä„ÇÑ"],["Ë¶™Âàá","„Åó„Çì„Åõ„Å§"]],
  "Ë®à":[["ÊôÇË®à","„Å®„Åë„ÅÑ"],["Ë®àÁîª","„Åë„ÅÑ„Åã„Åè"]],
  "Ë©¶":[["Ë©¶È®ì","„Åó„Åë„Çì"],["Ë©¶„Åô","„Åü„ÇÅ„Åô"]],
  "Ë≤∏":[["Ë≤∏„Åô","„Åã„Åô"],["Ë≥ÉË≤∏","„Å°„Çì„Åü„ÅÑ"]],
  "Ë≥™":[["Ë≥™Âïè","„Åó„Å§„ÇÇ„Çì"],["ÂìÅË≥™","„Å≤„Çì„Åó„Å§"]],
  "Ëµ§":[["Ëµ§„ÅÑ","„ÅÇ„Åã„ÅÑ"],["Ëµ§‰ø°Âè∑","„ÅÇ„Åã„Åó„Çì„Åî„ÅÜ"]],
  "Ëµ∞":[["Ëµ∞„Çã","„ÅØ„Åó„Çã"],["Á´∂Ëµ∞","„Åç„Çá„ÅÜ„Åù„ÅÜ"]],
  "Ëµ∑":[["Ëµ∑„Åç„Çã","„Åä„Åç„Çã"],["Ëµ∑„Åì„Åô","„Åä„Åì„Åô"]],
  "Ëª¢":[["Ëá™Ëª¢Ëªä","„Åò„Å¶„Çì„Åó„ÇÉ"],["ÈÅãËª¢","„ÅÜ„Çì„Å¶„Çì"]],
  "Ëøë":[["Ëøë„ÅÑ","„Å°„Åã„ÅÑ"],["ËøëÊâÄ","„Åç„Çì„Åò„Çá"]],
  "ÈÄÅ":[["ÈÄÅ„Çã","„Åä„Åè„Çã"],["ÊîæÈÄÅ","„Åª„ÅÜ„Åù„ÅÜ"]],
  "ÈÄö":[["ÈÄö„Çã","„Å®„Åä„Çã"],["ÈÄöÂ≠¶","„Å§„ÅÜ„Åå„Åè"]],
  "ÈÄ±":[["ÈÄ±Êú´","„Åó„ÇÖ„ÅÜ„Åæ„Å§"],["Êù•ÈÄ±","„Çâ„ÅÑ„Åó„ÇÖ„ÅÜ"]],
  "ÈÅã":[["ÈÅãÂãï","„ÅÜ„Çì„Å©„ÅÜ"],["ÈÅã„Å∂","„ÅØ„Åì„Å∂"]],
  "ÈÅì":[["ÈÅìË∑Ø","„Å©„ÅÜ„Çç"],["ÈÅì","„Åø„Å°"]],
  "Èáç":[["Èáç„ÅÑ","„Åä„ÇÇ„ÅÑ"],["ÈáçË¶Å","„Åò„ÇÖ„ÅÜ„Çà„ÅÜ"]],
  "ÈäÄ":[["ÈäÄË°å","„Åé„Çì„Åì„ÅÜ"],["ÈäÄËâ≤","„Åé„Çì„ÅÑ„Çç"]],
  "Èñã":[["Èñã„Åè","„Å≤„Çâ„Åè"],["ÈñãÂßã","„Åã„ÅÑ„Åó"]],
  "Èô¢":[["ÁóÖÈô¢","„Å≥„Çá„ÅÜ„ÅÑ„Çì"],["ÂåªÈô¢","„ÅÑ„ÅÑ„Çì"]],
  "ÈõÜ":[["ÈõÜ„Åæ„Çã","„ÅÇ„Å§„Åæ„Çã"],["ÂãüÈõÜ","„Åº„Åó„ÇÖ„ÅÜ"]],
  "Èùí":[["Èùí„ÅÑ","„ÅÇ„Åä„ÅÑ"],["ÈùíÂπ¥","„Åõ„ÅÑ„Å≠„Çì"]],
  "Èü≥":[["Èü≥","„Åä„Å®"],["Áô∫Èü≥","„ÅØ„Å§„Åä„Çì"]],
  "È°å":[["ÂïèÈ°å","„ÇÇ„Çì„Å†„ÅÑ"],["È°åÂêç","„Å†„ÅÑ„ÇÅ„ÅÑ"]],
  "È¢®":[["È¢®","„Åã„Åú"],["Âè∞È¢®","„Åü„ÅÑ„Åµ„ÅÜ"]],
  "È£Ø":[["„ÅîÈ£Ø","„Åî„ÅØ„Çì"],["ÊúùÈ£Ø","„ÅÇ„Åï„ÇÅ„Åó"]],
  "È£≤":[["È£≤„ÇÄ","„ÅÆ„ÇÄ"],["È£≤„ÅøÁâ©","„ÅÆ„Åø„ÇÇ„ÅÆ"]],
  "È§®":[["Âõ≥Êõ∏È§®","„Å®„Åó„Çá„Åã„Çì"],["ÊóÖÈ§®","„Çä„Çá„Åã„Çì"]],
  "ÈßÖ":[["ÈßÖ","„Åà„Åç"],["ÈßÖÂâç","„Åà„Åç„Åæ„Åà"]],
  "È®ì":[["Ë©¶È®ì","„Åó„Åë„Çì"],["ÁµåÈ®ì","„Åë„ÅÑ„Åë„Çì"]],
  "È≠ö":[["È≠ö","„Åï„Åã„Å™"],["ÈáëÈ≠ö","„Åç„Çì„Åé„Çá"]],
  "È≥•":[["È≥•","„Å®„Çä"],["Â∞èÈ≥•","„Åì„Å®„Çä"]],
  "Èªí":[["Èªí„ÅÑ","„Åè„Çç„ÅÑ"],["ÈªíÊùø","„Åì„Åè„Å∞„Çì"]],
};

/* =========================
   HELPERS
   ========================= */
const $ = (id)=>document.getElementById(id);

function flash(type){
  const f = $("flash");
  f.className = "flash " + type;
  void f.offsetWidth;
  f.classList.add("on");
  setTimeout(()=>f.classList.remove("on"), 560);
}
function shuffle(arr){
  const a = [...arr];
  for(let i=a.length-1;i>0;i--){
    const j = Math.floor(Math.random()*(i+1));
    [a[i],a[j]] = [a[j],a[i]];
  }
  return a;
}
function uniqByText(opts){
  const seen = new Set();
  const out = [];
  for(const o of opts){
    const key = (o.text||"").trim();
    if(!key || seen.has(key)) continue;
    seen.add(key);
    out.push(o);
  }
  return out;
}

function levelOf(k){
  if(N5_SET.has(k)) return "N5";
  if(N4_SET.has(k)) return "N4";
  return "N4";
}
function allKanjisUnique(){
  const set = new Set([...N5_LIST, ...N4_LIST]);
  return Array.from(set);
}
function poolByLevel(level){
  const all = allKanjisUnique();
  if(level === "N5") return all.filter(k=>N5_SET.has(k));
  if(level === "N4") return all.filter(k=>N4_SET.has(k));
  return all;
}

/* =========================
   TABS
   ========================= */
const sections = { kanji:$("kanji"), quiz:$("quiz") };
const tabs = { kanji:$("tab-kanji"), quiz:$("tab-quiz") };

function openTab(id){
  Object.values(sections).forEach(s=>s.classList.remove("active"));
  Object.values(tabs).forEach(t=>t.classList.remove("active"));
  sections[id].classList.add("active");
  tabs[id].classList.add("active");
  if(id==="kanji") renderKanjiGrid();
}
tabs.kanji.addEventListener("click", ()=>openTab("kanji"));
tabs.quiz.addEventListener("click", ()=>openTab("quiz"));

/* =========================
   STROKE ORDER (KanjiVG) + CACHE + ANIMA√á√ÉO
   ========================= */
const svgCache = new Map();
const strokeAnimState = new WeakMap();

function codepointHex5(ch){
  return ch.codePointAt(0).toString(16).padStart(5,"0");
}
function clearSVGAnimation(svg){
  const st = strokeAnimState.get(svg);
  if(st?.length) st.forEach(t=>clearTimeout(t));
  strokeAnimState.set(svg, []);
}
function pickStrokePaths(svg){
  const all = Array.from(svg.querySelectorAll("path"));
  const strokes = all.filter(p=>{
    const id = (p.getAttribute("id") || "");
    return /-s\d+/.test(id);
  });
  return strokes.length ? strokes : all;
}
function preparePaths(paths){
  for(const p of paths){
    p.style.fill = "none";
    p.style.stroke = "var(--accent2)";
    p.style.strokeWidth = "3.4";
    p.style.strokeLinecap = "round";
    p.style.strokeLinejoin = "round";
    p.style.opacity = "1";
    p.style.transition = "none";
  }
}
function animateStrokeOrder(svg, speed=1){
  if(!svg) return;
  clearSVGAnimation(svg);

  const paths = pickStrokePaths(svg);
  if(!paths.length) return;

  preparePaths(paths);

  const lengths = paths.map(p=>{
    let len = 160;
    try{ len = p.getTotalLength(); }catch{}
    p.style.strokeDasharray = String(len);
    p.style.strokeDashoffset = String(len);
    return len;
  });

  const timeouts = [];
  let cursor = 0;

  for(let i=0;i<paths.length;i++){
    const p = paths[i];
    const len = lengths[i];
    const dur = Math.max(220, Math.min(900, len*2.1)) * speed;

    const t = setTimeout(()=>{
      p.style.transition = `stroke-dashoffset ${dur}ms linear`;
      p.style.strokeDashoffset = "0";
    }, cursor);

    timeouts.push(t);
    cursor += dur + 85*speed;
  }
  strokeAnimState.set(svg, timeouts);
}

async function loadKanjiSVGInto(kanji, targetEl){
  if(svgCache.has(kanji)){
    targetEl.innerHTML = svgCache.get(kanji);
    return targetEl.querySelector("svg");
  }
  const hex = codepointHex5(kanji);
  const url = `https://cdn.jsdelivr.net/gh/KanjiVG/kanjivg@master/kanji/${hex}.svg`;
  targetEl.innerHTML = `<div class="small">Carregando stroke order...</div>`;
  try{
    const res = await fetch(url, {cache:"force-cache"});
    if(!res.ok) throw new Error("HTTP "+res.status);
    const svgText = await res.text();
    const cleaned = svgText
      .replace(/width="[^"]*"/g,'')
      .replace(/height="[^"]*"/g,'')
      .replace(/<\?xml[^>]*\?>/g,'');
    svgCache.set(kanji, cleaned);
    targetEl.innerHTML = cleaned;
    return targetEl.querySelector("svg");
  }catch{
    targetEl.innerHTML = `<div class="small">Falha ao carregar. Ctrl+F5 e tente novamente.</div>`;
    return null;
  }
}

/* =========================
   KANJI TAB
   ========================= */
const kanjigrid = $("kanjigrid");
const levelFilter = $("levelFilter");

const kdBox = $("kanjiDetail");
const kdEmpty = $("kanjiDetailEmpty");
const kdKanji = $("kdKanji");
const kdReadings = $("kdReadings");
const kdMean = $("kdMean");
const kdBadges = $("kdBadges");
const kdStroke = $("kdStroke");
const kdSpeed = $("kdSpeed");

let selectedKanji = null;
let kdSvgEl = null;

function renderKanjiGrid(){
  const level = levelFilter.value;
  const list = poolByLevel(level);

  kanjigrid.innerHTML = "";
  const frag = document.createDocumentFragment();

  for(const k of list){
    const lvl = levelOf(k);
    const div = document.createElement("div");
    div.className = "kanjiitem";
    div.innerHTML = `
      <div class="k">${k}</div>
      <div class="lvl"><b>${lvl}</b> „Éª clique</div>
    `;
    div.addEventListener("click", ()=>showKanjiDetail(k, true));
    frag.appendChild(div);
  }
  kanjigrid.appendChild(frag);
}

levelFilter.addEventListener("change", ()=>{
  renderKanjiGrid();
  selectedKanji = null;
  kdSvgEl = null;
  kdBox.style.display = "none";
  kdEmpty.style.display = "block";
});

async function showKanjiDetail(k, autoScroll){
  selectedKanji = k;
  const info = KANJI_INFO[k] || {readings:["‚Äî"], meaning:"‚Äî"};
  const lvl = levelOf(k);

  kdEmpty.style.display="none";
  kdBox.style.display="block";

  kdKanji.textContent = k;
  kdReadings.textContent = `Leituras: ${(info.readings || ["‚Äî"]).join(" / ")}`;
  kdMean.textContent = `Significado principal (PT): ${info.meaning || "‚Äî"}`;

  kdBadges.innerHTML = `
    <span class="badge ${lvl.toLowerCase()}">${lvl}</span>
    <span class="badge tag">kanji</span>
  `;

  // SCROLL autom√°tico para o detalhe (mais din√¢mico)
  if(autoScroll){
    // rola at√© o painel de detalhe (no mobile √© essencial)
    $("detailPanel").scrollIntoView({behavior:"smooth", block:"start"});
    // e depois garante que a caixa de stroke esteja vis√≠vel
    setTimeout(()=> $("kdStrokeBox").scrollIntoView({behavior:"smooth", block:"start"}), 250);
  }

  kdSvgEl = await loadKanjiSVGInto(k, kdStroke);
  animateStrokeOrder(kdSvgEl, Number(kdSpeed.value));
}

$("kdReplay").addEventListener("click", ()=>{
  if(!selectedKanji) return;
  animateStrokeOrder(kdSvgEl, Number(kdSpeed.value));
});
kdSpeed.addEventListener("change", ()=>{
  if(!selectedKanji) return;
  animateStrokeOrder(kdSvgEl, Number(kdSpeed.value));
});
$("kdTrain").addEventListener("click", ()=>{
  if(!selectedKanji) return;
  openTab("quiz");
  setQuestion(selectedKanji, true);
});

/* =========================
   QUIZ: stats + mood
   ========================= */
const LS_KEY = "vampire_znzn_kanji_quiz_v6";

function defaultStats(){
  return {
    bestStreak: 0,
    bestAccuracy: 0,
    bestScore: 0,
    totalCorrect: 0,
    totalWrong: 0,
    perKanji: {},
    recent: []
  };
}
function loadStats(){
  try{
    const raw = localStorage.getItem(LS_KEY);
    return raw ? JSON.parse(raw) : defaultStats();
  }catch{
    return defaultStats();
  }
}
function saveStats(){
  try{ localStorage.setItem(LS_KEY, JSON.stringify(stats)); }catch{}
}
let stats = loadStats();

function ensurePerKanji(k){
  if(!stats.perKanji[k]) stats.perKanji[k] = {c:0,w:0};
}
function pushRecent(ok){
  stats.recent.push(ok ? 1 : 0);
  if(stats.recent.length > 12) stats.recent.shift();
}
function moodScore(){
  if(!stats.recent.length) return 0.5;
  const sum = stats.recent.reduce((a,b)=>a+b,0);
  return sum / stats.recent.length;
}
function applyMood(){
  const s = moodScore();
  const hue = Math.round(8 + s * 127);
  document.documentElement.style.setProperty("--moodHue", String(hue));
  $("quizMoodText").textContent = `Mood: ${Math.round(s*100)}%`;
}

/* =========================
   QUIZ: engine
   ========================= */
const quizSmart = $("quizSmart");
const quizAuto = $("quizAuto");
const quizLevel = $("quizLevel");
const quizKanji = $("quizKanji");
const quizScoreEl = $("quizScore");
const quizTimerText = $("quizTimerText");
const timerBar = $("timerBar");
const quizTime = $("quizTime");

const readingChoices = $("readingChoices");
const meaningChoices = $("meaningChoices");

const quizFeedback = $("quizFeedback");
const quizFeedbackTitle = $("quizFeedbackTitle");
const quizFeedbackDetail = $("quizFeedbackDetail");
const quizVocab = $("quizVocab");
const quizStroke = $("quizStroke");
const quizSpeed = $("quizSpeed");

const bestStatsEl = $("bestStats");
const worstKanjisEl = $("worstKanjis");

let quizSvgEl = null;

$("goKanji").addEventListener("click", ()=> openTab("kanji"));
$("resetHistory").addEventListener("click", ()=>{
  stats = defaultStats();
  saveStats();
  updateRightPanel();
  applyMood();
  flash("bad");
});

const quizState = {
  current: "‰∏Ä",
  running: false,
  timerId: null,
  timeLeftMs: 12000,
  timeTotalMs: 12000,

  sessionCorrect: 0,
  sessionWrong: 0,
  sessionStreak: 0,

  answeredReading: false,
  answeredMeaning: false,
  okReading: false,
  okMeaning: false,

  lastPick: null
};

function updateScoreUI(){
  quizScoreEl.textContent =
    `Acertos: ${quizState.sessionCorrect} ¬∑ Erros: ${quizState.sessionWrong} ¬∑ Streak: ${quizState.sessionStreak}`;
}

function updateRightPanel(){
  const totalGlobal = stats.totalCorrect + stats.totalWrong;
  const accGlobal = totalGlobal ? (stats.totalCorrect / totalGlobal) : 0;

  bestStatsEl.innerHTML = `
    ‚Ä¢ Best streak: <b>${stats.bestStreak}</b><br>
    ‚Ä¢ Best accuracy: <b>${Math.round(stats.bestAccuracy*100)}%</b><br>
    ‚Ä¢ Best score (C‚àíE): <b>${stats.bestScore}</b><br>
    ‚Ä¢ Global accuracy: <b>${Math.round(accGlobal*100)}%</b>
      (C:${stats.totalCorrect} / E:${stats.totalWrong})
  `;

  const arr = Object.entries(stats.perKanji).map(([k,v])=>{
    const total = v.c + v.w;
    const err = total ? (v.w / total) : 0;
    return {k, c:v.c, w:v.w, total, err};
  }).filter(x=>x.total>0);

  arr.sort((a,b)=> (b.w - a.w) || (b.err - a.err));
  const top = arr.slice(0,10);

  worstKanjisEl.innerHTML = top.length
    ? top.map(x=>{
        const pct = Math.round(x.err*100);
        return `‚Ä¢ <b>${x.k}</b> ‚Äî erros: ${x.w} / ${x.total} (${pct}%)`;
      }).join("<br>")
    : "‚Äî";
}

function updateBests(){
  stats.bestStreak = Math.max(stats.bestStreak, quizState.sessionStreak);
  const totalSession = quizState.sessionCorrect + quizState.sessionWrong;
  const accSession = totalSession ? (quizState.sessionCorrect / totalSession) : 0;
  const scoreSession = quizState.sessionCorrect - quizState.sessionWrong;
  stats.bestAccuracy = Math.max(stats.bestAccuracy, accSession);
  stats.bestScore = Math.max(stats.bestScore, scoreSession);
}

function readingText(k){
  return (KANJI_INFO[k]?.readings || ["‚Äî"]).join(" / ");
}
function meaningText(k){
  return (KANJI_INFO[k]?.meaning || "‚Äî");
}

function buildChoices(kind, correctKanji, pool){
  const poolOthers = pool.filter(k=>k !== correctKanji);
  const sample = shuffle(poolOthers).slice(0, 16);

  const correct = {
    text: (kind==="reading") ? readingText(correctKanji) : meaningText(correctKanji),
    correct: true
  };

  let opts = [correct, ...sample.map(k=>{
    return { text: (kind==="reading") ? readingText(k) : meaningText(k), correct:false };
  })];

  opts = uniqByText(opts);

  if(!opts.some(o=>o.correct)) opts.unshift(correct);

  opts = opts.slice(0,4);
  while(opts.length < 4){
    const k = poolOthers[Math.floor(Math.random()*poolOthers.length)];
    const text = (kind==="reading") ? readingText(k) : meaningText(k);
    if(opts.some(o=>o.text===text)) continue;
    opts.push({text, correct:false});
  }
  return shuffle(opts);
}

function resetQuestionState(){
  quizState.answeredReading = false;
  quizState.answeredMeaning = false;
  quizState.okReading = false;
  quizState.okMeaning = false;
  quizFeedback.style.display = "none";
}

function disableAllChoices(){
  document.querySelectorAll(".choiceBtn").forEach(b=> b.disabled = true);
}

function renderChoiceButtons(targetEl, options, onPick){
  targetEl.innerHTML = "";
  for(const opt of options){
    const b = document.createElement("button");
    b.type = "button";
    b.className = "choiceBtn";
    b.textContent = opt.text;

    b.addEventListener("click", ()=>{
      const btns = Array.from(targetEl.querySelectorAll(".choiceBtn"));
      btns.forEach(btn=> btn.disabled = true);

      btns.forEach((btn, idx)=>{
        if(options[idx].correct) btn.classList.add("correct");
      });

      if(opt.correct) b.classList.add("correct");
      else b.classList.add("wrong");

      onPick(opt.correct);
    });

    targetEl.appendChild(b);
  }
}

function weightedPick(pool){
  let total = 0;
  const weights = pool.map(k=>{
    ensurePerKanji(k);
    const {c,w} = stats.perKanji[k];
    const unseen = (c+w===0) ? 1.0 : 0;
    const weight = Math.max(0.2, 1 + w*2.6 - c*0.30 + unseen);
    total += weight;
    return weight;
  });

  let r = Math.random() * total;
  for(let i=0;i<pool.length;i++){
    r -= weights[i];
    if(r <= 0) return pool[i];
  }
  return pool[pool.length-1];
}

function getQuizPool(){
  const lvl = quizLevel.value;
  const pool = poolByLevel(lvl);
  return pool.length < 6 ? poolByLevel("ALL") : pool;
}

function pickKanji(pool){
  let k = quizSmart.checked ? weightedPick(pool) : pool[Math.floor(Math.random()*pool.length)];
  if(pool.length > 1 && k === quizState.lastPick){
    k = pool[Math.floor(Math.random()*pool.length)];
  }
  quizState.lastPick = k;
  return k;
}

function formatVocab2(kanji){
  const arr = VOCAB_2[kanji];
  if(!arr || !arr.length) return "‚Äî";
  const lines = arr.slice(0,2).map(([w,r])=>`‚Ä¢ <b>${w}</b>Ôºà${r}Ôºâ`);
  return lines.join("<br>");
}

async function showFeedback(okAll, reason){
  const k = quizState.current;
  const info = KANJI_INFO[k] || {readings:["‚Äî"], meaning:"‚Äî"};

  quizFeedback.style.display = "block";
  quizFeedbackTitle.innerHTML = okAll
    ? `‚úÖ <b>Acertou!</b> (2/2)`
    : (reason === "timeout" ? `‚è±Ô∏è <b>Tempo esgotado.</b>` : `‚ùå <b>Errou.</b>`);

  quizFeedbackDetail.innerHTML = `
    Kanji: <b>${k}</b> ¬∑ <b>${levelOf(k)}</b><br>
    Leituras: <b>${(info.readings||["‚Äî"]).join(" / ")}</b><br>
    Significado: <b>${info.meaning||"‚Äî"}</b>
  `;

  quizVocab.innerHTML = formatVocab2(k);

  quizSvgEl = await loadKanjiSVGInto(k, quizStroke);
  animateStrokeOrder(quizSvgEl, Number(quizSpeed.value));
}

function commitResult(okAll, reason){
  const k = quizState.current;
  ensurePerKanji(k);

  if(okAll){
    quizState.sessionCorrect += 1;
    quizState.sessionStreak += 1;
    stats.totalCorrect += 1;
    stats.perKanji[k].c += 1;
    pushRecent(true);
    flash("good");
  }else{
    quizState.sessionWrong += 1;
    quizState.sessionStreak = 0;
    stats.totalWrong += 1;
    stats.perKanji[k].w += 1;
    pushRecent(false);
    flash("bad");
  }

  updateScoreUI();
  updateBests();
  applyMood();
  updateRightPanel();
  saveStats();

  stopTimer();
  disableAllChoices();

  showFeedback(okAll, reason);

  setTimeout(()=> nextQuestion(), 900);
}

function evaluateIfComplete(){
  if(!(quizState.answeredReading && quizState.answeredMeaning)) return;
  const okAll = quizState.okReading && quizState.okMeaning;
  commitResult(okAll, "answered");
}

async function setQuestion(kanji, keepTimerRunning){
  quizState.current = kanji;
  quizKanji.textContent = kanji;

  resetQuestionState();

  const pool = getQuizPool();
  const rOpts = buildChoices("reading", kanji, pool);
  const mOpts = buildChoices("meaning", kanji, pool);

  renderChoiceButtons(readingChoices, rOpts, (ok)=>{
    quizState.answeredReading = true;
    quizState.okReading = ok;
    evaluateIfComplete();
  });

  renderChoiceButtons(meaningChoices, mOpts, (ok)=>{
    quizState.answeredMeaning = true;
    quizState.okMeaning = ok;
    evaluateIfComplete();
  });

  if(quizState.running){
    startTimer(true);
  }else if(!keepTimerRunning){
    const seconds = Number(quizTime.value);
    quizState.timeTotalMs = seconds * 1000;
    quizState.timeLeftMs = quizState.timeTotalMs;
    updateTimerUI();
  }else{
    if(quizAuto.checked) startTimer(true);
    else{
      const seconds = Number(quizTime.value);
      quizState.timeTotalMs = seconds * 1000;
      quizState.timeLeftMs = quizState.timeTotalMs;
      updateTimerUI();
    }
  }
}

function nextQuestion(){
  const pool = getQuizPool();
  setQuestion(pickKanji(pool), true);
}

/* =========================
   TIMER
   ========================= */
function updateTimerUI(){
  const leftSec = Math.max(0, Math.ceil(quizState.timeLeftMs/1000));
  quizTimerText.textContent = `‚è±Ô∏è ${leftSec}s`;

  const pct = quizState.timeTotalMs ? (quizState.timeLeftMs/quizState.timeTotalMs) : 0;
  timerBar.style.width = `${Math.max(0, Math.min(1, pct))*100}%`;
}
function stopTimer(){
  if(quizState.timerId){
    clearInterval(quizState.timerId);
    quizState.timerId = null;
  }
  quizState.running = false;
}
function startTimer(reset){
  const seconds = Number(quizTime.value);
  quizState.timeTotalMs = seconds*1000;
  if(reset) quizState.timeLeftMs = quizState.timeTotalMs;

  stopTimer();
  quizState.running = true;

  quizState.timerId = setInterval(()=>{
    quizState.timeLeftMs -= 200;
    updateTimerUI();
    if(quizState.timeLeftMs <= 0){
      stopTimer();
      commitResult(false, "timeout");
    }
  }, 200);

  updateTimerUI();
}

/* =========================
   CONTROLES QUIZ
   ========================= */
$("quizStart").addEventListener("click", ()=> startTimer(true));
$("quizPause").addEventListener("click", ()=>{
  if(quizState.running) stopTimer();
  else startTimer(false);
});
$("quizNext").addEventListener("click", ()=> nextQuestion());
$("quizReset").addEventListener("click", ()=>{
  stopTimer();
  quizState.sessionCorrect = 0;
  quizState.sessionWrong = 0;
  quizState.sessionStreak = 0;
  updateScoreUI();
  flash("bad");
  nextQuestion();
});

quizTime.addEventListener("change", ()=>{
  if(quizState.running) startTimer(true);
  else{
    quizState.timeTotalMs = Number(quizTime.value)*1000;
    quizState.timeLeftMs = quizState.timeTotalMs;
    updateTimerUI();
  }
});

$("quizReplay").addEventListener("click", ()=>{
  if(!quizSvgEl) return;
  animateStrokeOrder(quizSvgEl, Number(quizSpeed.value));
});
quizSpeed.addEventListener("change", ()=>{
  if(!quizSvgEl) return;
  animateStrokeOrder(quizSvgEl, Number(quizSpeed.value));
});
quizLevel.addEventListener("change", ()=> nextQuestion());

/* =========================
   INIT
   ========================= */
function init(){
  renderKanjiGrid();
  updateRightPanel();
  applyMood();
  updateScoreUI();
  setQuestion("‰∏Ä", false);
}
init();
</script>

</body>
</html>
